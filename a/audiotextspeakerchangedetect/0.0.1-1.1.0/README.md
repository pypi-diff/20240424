# Comparing `tmp/audiotextspeakerchangedetect-0.0.1-py3-none-any.whl.zip` & `tmp/audiotextspeakerchangedetect-1.1.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,30 +1,30 @@
-Zip file size: 22025 bytes, number of entries: 28
--rw-r--r--  2.0 unx        0 b- defN 24-Feb-23 16:25 audiotextspeakerchangedetect/__init__.py
+Zip file size: 23446 bytes, number of entries: 28
+-rw-r--r--  2.0 unx        0 b- defN 24-Feb-26 17:21 audiotextspeakerchangedetect/__init__.py
 -rw-r--r--  2.0 unx     3946 b- defN 24-Feb-23 19:55 audiotextspeakerchangedetect/main.py
 -rw-r--r--  2.0 unx     1728 b- defN 24-Feb-23 22:50 audiotextspeakerchangedetect/sample_run.py
 -rw-r--r--  2.0 unx     1869 b- defN 24-Feb-23 20:16 audiotextspeakerchangedetect/sample_run_existingllama2output.py
--rw-r--r--  2.0 unx        0 b- defN 24-Jan-30 22:28 audiotextspeakerchangedetect/EnsembleSpeakerChangeDetection/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Feb-26 17:21 audiotextspeakerchangedetect/EnsembleSpeakerChangeDetection/__init__.py
 -rw-r--r--  2.0 unx     5643 b- defN 24-Feb-23 18:39 audiotextspeakerchangedetect/EnsembleSpeakerChangeDetection/ensemble_detection.py
 -rw-r--r--  2.0 unx     1035 b- defN 24-Feb-23 18:36 audiotextspeakerchangedetect/EnsembleSpeakerChangeDetection/helpers.py
--rw-r--r--  2.0 unx        0 b- defN 23-Dec-19 16:31 audiotextspeakerchangedetect/SpeakerChangeDetection/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Feb-26 17:21 audiotextspeakerchangedetect/SpeakerChangeDetection/__init__.py
 -rw-r--r--  2.0 unx      889 b- defN 24-Feb-23 18:37 audiotextspeakerchangedetect/SpeakerChangeDetection/helpers.py
--rw-r--r--  2.0 unx     6506 b- defN 24-Feb-23 19:44 audiotextspeakerchangedetect/SpeakerChangeDetection/speaker_change_detection_main_function.py
--rw-r--r--  2.0 unx        0 b- defN 23-Dec-19 17:02 audiotextspeakerchangedetect/SpeakerChangeDetection/Llama2/__init__.py
+-rw-r--r--  2.0 unx     6775 b- defN 24-Mar-04 18:18 audiotextspeakerchangedetect/SpeakerChangeDetection/speaker_change_detection_main_function.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Feb-26 17:21 audiotextspeakerchangedetect/SpeakerChangeDetection/Llama2/__init__.py
 -rw-r--r--  2.0 unx     5892 b- defN 24-Feb-23 22:52 audiotextspeakerchangedetect/SpeakerChangeDetection/Llama2/speaker_change_detection_llama2.py
 -rw-r--r--  2.0 unx     2207 b- defN 23-Dec-21 04:04 audiotextspeakerchangedetect/SpeakerChangeDetection/Llama2/huggingface_offline/LLaMA_HuggingFace_Offline.py
--rw-r--r--  2.0 unx        0 b- defN 24-Jan-16 18:28 audiotextspeakerchangedetect/SpeakerChangeDetection/Llama2/huggingface_offline/__init__.py
--rw-r--r--  2.0 unx        0 b- defN 24-Jan-16 18:27 audiotextspeakerchangedetect/SpeakerChangeDetection/Llama2/prompts/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Feb-26 17:21 audiotextspeakerchangedetect/SpeakerChangeDetection/Llama2/huggingface_offline/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Feb-26 17:21 audiotextspeakerchangedetect/SpeakerChangeDetection/Llama2/prompts/__init__.py
 -rw-r--r--  2.0 unx     3976 b- defN 24-Feb-23 17:55 audiotextspeakerchangedetect/SpeakerChangeDetection/Llama2/prompts/prompt1.py
 -rw-r--r--  2.0 unx     1037 b- defN 24-Feb-23 17:55 audiotextspeakerchangedetect/SpeakerChangeDetection/Llama2/prompts/prompt1_template.py
--rw-r--r--  2.0 unx        0 b- defN 24-Jan-22 17:19 audiotextspeakerchangedetect/SpeakerChangeDetection/NLP/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Feb-26 17:21 audiotextspeakerchangedetect/SpeakerChangeDetection/NLP/__init__.py
 -rw-r--r--  2.0 unx     1288 b- defN 24-Feb-23 17:55 audiotextspeakerchangedetect/SpeakerChangeDetection/NLP/speaker_change_detection_nlp.py
--rw-r--r--  2.0 unx        0 b- defN 23-Dec-19 16:31 audiotextspeakerchangedetect/SpeakerChangeDetection/PyAnnote/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Feb-26 17:21 audiotextspeakerchangedetect/SpeakerChangeDetection/PyAnnote/__init__.py
 -rw-r--r--  2.0 unx     1179 b- defN 24-Jan-30 21:58 audiotextspeakerchangedetect/SpeakerChangeDetection/PyAnnote/speaker_change_detection_pyannote.py
--rw-r--r--  2.0 unx        0 b- defN 23-Dec-19 16:31 audiotextspeakerchangedetect/SpeakerChangeDetection/SpectralClustering/__init__.py
--rw-r--r--  2.0 unx     1406 b- defN 24-Jan-30 21:52 audiotextspeakerchangedetect/SpeakerChangeDetection/SpectralClustering/speaker_change_detection_clustering.py
--rw-r--r--  2.0 unx     1068 b- defN 24-Feb-26 17:16 audiotextspeakerchangedetect-0.0.1.dist-info/LICENSE
--rw-r--r--  2.0 unx     6846 b- defN 24-Feb-26 17:16 audiotextspeakerchangedetect-0.0.1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Feb-26 17:16 audiotextspeakerchangedetect-0.0.1.dist-info/WHEEL
--rw-r--r--  2.0 unx       29 b- defN 24-Feb-26 17:16 audiotextspeakerchangedetect-0.0.1.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     3510 b- defN 24-Feb-26 17:16 audiotextspeakerchangedetect-0.0.1.dist-info/RECORD
-28 files, 50146 bytes uncompressed, 15875 bytes compressed:  68.3%
+-rw-r--r--  2.0 unx        0 b- defN 24-Feb-26 17:21 audiotextspeakerchangedetect/SpeakerChangeDetection/SpectralClustering/__init__.py
+-rw-r--r--  2.0 unx     1407 b- defN 24-Mar-02 04:13 audiotextspeakerchangedetect/SpeakerChangeDetection/SpectralClustering/speaker_change_detection_clustering.py
+-rw-r--r--  2.0 unx     1092 b- defN 24-Apr-24 16:02 audiotextspeakerchangedetect-1.1.0.dist-info/LICENSE
+-rw-r--r--  2.0 unx    10355 b- defN 24-Apr-24 16:02 audiotextspeakerchangedetect-1.1.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-24 16:02 audiotextspeakerchangedetect-1.1.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx       29 b- defN 24-Apr-24 16:02 audiotextspeakerchangedetect-1.1.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     3511 b- defN 24-Apr-24 16:02 audiotextspeakerchangedetect-1.1.0.dist-info/RECORD
+28 files, 53950 bytes uncompressed, 17296 bytes compressed:  67.9%
```

## zipnote {}

```diff
@@ -63,23 +63,23 @@
 
 Filename: audiotextspeakerchangedetect/SpeakerChangeDetection/SpectralClustering/__init__.py
 Comment: 
 
 Filename: audiotextspeakerchangedetect/SpeakerChangeDetection/SpectralClustering/speaker_change_detection_clustering.py
 Comment: 
 
-Filename: audiotextspeakerchangedetect-0.0.1.dist-info/LICENSE
+Filename: audiotextspeakerchangedetect-1.1.0.dist-info/LICENSE
 Comment: 
 
-Filename: audiotextspeakerchangedetect-0.0.1.dist-info/METADATA
+Filename: audiotextspeakerchangedetect-1.1.0.dist-info/METADATA
 Comment: 
 
-Filename: audiotextspeakerchangedetect-0.0.1.dist-info/WHEEL
+Filename: audiotextspeakerchangedetect-1.1.0.dist-info/WHEEL
 Comment: 
 
-Filename: audiotextspeakerchangedetect-0.0.1.dist-info/top_level.txt
+Filename: audiotextspeakerchangedetect-1.1.0.dist-info/top_level.txt
 Comment: 
 
-Filename: audiotextspeakerchangedetect-0.0.1.dist-info/RECORD
+Filename: audiotextspeakerchangedetect-1.1.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## audiotextspeakerchangedetect/SpeakerChangeDetection/speaker_change_detection_main_function.py

```diff
@@ -11,15 +11,15 @@
 
 from .helpers import merge_detection_audio_results_with_transcription
 
 
 def run_speaker_change_detection_models(audio_file_input_path, audio_file_input_name, min_speakers, max_speakers,
                                    transcription_input_path, transcription_input_file_name, detection_models,
                                    detection_output_path, hf_access_token,
-                                   llama2_model_path, pyannote_model_path=None,
+                                   llama2_model_path=None, pyannote_model_path=None,
                                    device: Union[str, torch.device]=None,
                                    detection_llama2_output_path=None, temp_output_path=None):
     '''
     The main function to choose and run models to identify speaker change detections of an input
     audio file from each of models
 
     :param audio_file_input_path: A path which contains an input audio file
@@ -62,20 +62,27 @@
     llama2_models_list = [i for i in detection_models if i.startswith('llama2')] # Should be like ['llama2-7b']
     if not llama2_models_list:
         if len(llama2_models_list) > 1:
             raise Exception('Should only select one llama2 model for detection, reinput the detection models')
     
     input_csvfilename = transcription_input_file_name
 
+    # Set max_split_size_mb to reduce memory fregmentation
+    os.environ["PYTORCH_CUDA_ALLOC_CONF"] = "max_split_size_mb:512"
+
+    # Clear memory cache
+    torch.cuda.empty_cache()
+
     # Import whisper output
     whisper_df = pd.read_csv(os.path.join(transcription_input_path, transcription_input_file_name))
     if 'clustering' in detection_models:
+        # Use 'cpu' device here to avoid large gpu memory but low gpu utilization
         # Run detection based on the clustering of sounds
         timestamp_speaker_clustering = spectralclustering_speakerchangedetection(audio_file_input_path, audio_file_input_name,
-                                                   min_speakers, max_speakers, device)
+                                                   min_speakers, max_speakers, 'cpu')
 
         print('finish clustering')
         speakers_clustering, speaker_change_clustering = merge_detection_audio_results_with_transcription(timestamp_speaker_clustering, whisper_df)
         whisper_df['speaker_spectralclustering'] = speakers_clustering
         whisper_df['speaker_change_spectralclustering'] = speaker_change_clustering
     if 'pyannote' in detection_models:
         timestamp_speaker_pyannote = pyannote_speakerchangedetection(audio_file_input_path, audio_file_input_name,
```

## audiotextspeakerchangedetect/SpeakerChangeDetection/SpectralClustering/speaker_change_detection_clustering.py

```diff
@@ -16,15 +16,15 @@
             timestamp_speaker[start_time] = 'speaker' + str(labels[i - 1])
             start_time = time
         if i == len(times) - 1:
             timestamp_speaker[start_time] = 'speaker' + str(labels[i])
     return timestamp_speaker
 
 def spectralclustering_speakerchangedetection(audio_file_input_path, audio_file_input_name,
-                                           min_speakers, max_speakers, device: Union[str, torch.device]=None):
+                                           min_speakers, max_speakers, device: Union[str, torch.device]='cpu'):
     wav = preprocess_wav(os.path.join(audio_file_input_path, audio_file_input_name))
 
     encoder = VoiceEncoder(device)
     _, cont_embeds, wav_splits = encoder.embed_utterance(wav, return_partials=True, rate=16)
 
     # Clustering of Speakers based on Embedding
     clusterer = SpectralClusterer(
```

## Comparing `audiotextspeakerchangedetect-0.0.1.dist-info/LICENSE` & `audiotextspeakerchangedetect-1.1.0.dist-info/LICENSE`

 * *Files 8% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 MIT License
 
-Copyright (c) 2024 Junying Fang
+Copyright (c) 2024 The Trustees of Princeton University
 
 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:
```

## Comparing `audiotextspeakerchangedetect-0.0.1.dist-info/RECORD` & `audiotextspeakerchangedetect-1.1.0.dist-info/RECORD`

 * *Files 7% similar despite different names*

```diff
@@ -3,26 +3,26 @@
 audiotextspeakerchangedetect/sample_run.py,sha256=VAVBTrkZAInn62cQ-ybMy7mFWlbI1aAnbhCfH0Qi44A,1728
 audiotextspeakerchangedetect/sample_run_existingllama2output.py,sha256=KQRewWhpiMqhHtqMK91wi-6vktrG2FANbbgSNrz0hK8,1869
 audiotextspeakerchangedetect/EnsembleSpeakerChangeDetection/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 audiotextspeakerchangedetect/EnsembleSpeakerChangeDetection/ensemble_detection.py,sha256=lLFRqC9edjEL1uo7k9AmO0t6nhKLXWN5fjAW16KJO-U,5643
 audiotextspeakerchangedetect/EnsembleSpeakerChangeDetection/helpers.py,sha256=zVbA2t47_p3fTqEckyBRhEyLD07dykXzF4mUOhl-9FY,1035
 audiotextspeakerchangedetect/SpeakerChangeDetection/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 audiotextspeakerchangedetect/SpeakerChangeDetection/helpers.py,sha256=OHf1VGNJecRL-rUKhJYiEuHOfeh8fCVyPVOgUb5M3Gk,889
-audiotextspeakerchangedetect/SpeakerChangeDetection/speaker_change_detection_main_function.py,sha256=S527A6bQ6xox3nrmu0k3Vzl3jaIzdfnXu_dKbXGSm3o,6506
+audiotextspeakerchangedetect/SpeakerChangeDetection/speaker_change_detection_main_function.py,sha256=7dYqu36Sk9pz_g85k_XjayJUfokGQ-ZKFyV0yTgo7j0,6775
 audiotextspeakerchangedetect/SpeakerChangeDetection/Llama2/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 audiotextspeakerchangedetect/SpeakerChangeDetection/Llama2/speaker_change_detection_llama2.py,sha256=Z4p-wEaSH5cRukZA15Rk-hubXtcNhlSEBiMLHgVlye4,5892
 audiotextspeakerchangedetect/SpeakerChangeDetection/Llama2/huggingface_offline/LLaMA_HuggingFace_Offline.py,sha256=FxX-Rg99LqZD6RKxRWoDJYJfKr56bfvIjqFqvFoAmj0,2207
 audiotextspeakerchangedetect/SpeakerChangeDetection/Llama2/huggingface_offline/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 audiotextspeakerchangedetect/SpeakerChangeDetection/Llama2/prompts/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 audiotextspeakerchangedetect/SpeakerChangeDetection/Llama2/prompts/prompt1.py,sha256=urcSMuJN38AA-EXz3I16_Lm50uCExxgoXvnQ6PPQNEM,3976
 audiotextspeakerchangedetect/SpeakerChangeDetection/Llama2/prompts/prompt1_template.py,sha256=iHhOoUo9qhz7K46TAnBp9AfNzY-IT66zGTAC1nv9vWc,1037
 audiotextspeakerchangedetect/SpeakerChangeDetection/NLP/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 audiotextspeakerchangedetect/SpeakerChangeDetection/NLP/speaker_change_detection_nlp.py,sha256=7F9PseQfNSei6jqIDjPm6x-IrkVQxMlzXMS6gcvIXrY,1288
 audiotextspeakerchangedetect/SpeakerChangeDetection/PyAnnote/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 audiotextspeakerchangedetect/SpeakerChangeDetection/PyAnnote/speaker_change_detection_pyannote.py,sha256=xG33J7qqL-8XDr1HJdN9XhLwu3WBymMHIuPMkkyyOU0,1179
 audiotextspeakerchangedetect/SpeakerChangeDetection/SpectralClustering/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-audiotextspeakerchangedetect/SpeakerChangeDetection/SpectralClustering/speaker_change_detection_clustering.py,sha256=hsxIP_q92xKlvTkiQJ-q30U87bKqI_UNWh1ZrgjK8Us,1406
-audiotextspeakerchangedetect-0.0.1.dist-info/LICENSE,sha256=qSmCJ6fMgc80WyVgYw1Q1JfhKBWK1peR9Jmmlzogaiw,1068
-audiotextspeakerchangedetect-0.0.1.dist-info/METADATA,sha256=kRXSHL34v1r7IEfontTp0uye9gKIHePFPcZ9qP5H-Hw,6846
-audiotextspeakerchangedetect-0.0.1.dist-info/WHEEL,sha256=oiQVh_5PnQM0E3gPdiz09WCNmwiHDMaGer_elqB3coM,92
-audiotextspeakerchangedetect-0.0.1.dist-info/top_level.txt,sha256=j9RMny-GPUpx1KTFzsA8p4moG8nJgNRtiLqZORjUDXs,29
-audiotextspeakerchangedetect-0.0.1.dist-info/RECORD,,
+audiotextspeakerchangedetect/SpeakerChangeDetection/SpectralClustering/speaker_change_detection_clustering.py,sha256=mFOgfAw8KbIR2j-_XczTldhWuwfyl029RgxTCB_XEYQ,1407
+audiotextspeakerchangedetect-1.1.0.dist-info/LICENSE,sha256=y0FxS72Yc01R5i36fN2g0JCldQzKCdCZ_H6h3RtttGw,1092
+audiotextspeakerchangedetect-1.1.0.dist-info/METADATA,sha256=aZdAZcPQus5jXMN8hMenpT9qdelleBKBI4DP8Z7Z3Bc,10355
+audiotextspeakerchangedetect-1.1.0.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+audiotextspeakerchangedetect-1.1.0.dist-info/top_level.txt,sha256=j9RMny-GPUpx1KTFzsA8p4moG8nJgNRtiLqZORjUDXs,29
+audiotextspeakerchangedetect-1.1.0.dist-info/RECORD,,
```

