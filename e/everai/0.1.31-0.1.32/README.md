# Comparing `tmp/everai-0.1.31-py3-none-any.whl.zip` & `tmp/everai-0.1.32-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,42 +1,43 @@
-Zip file size: 417099 bytes, number of entries: 398
+Zip file size: 418117 bytes, number of entries: 400
 -rw-r--r--  2.0 unx       33 b- defN 24-Mar-05 14:37 everai/__init__.py
 -rw-r--r--  2.0 unx     1077 b- defN 24-Apr-17 09:14 everai/constants.py
 -rw-r--r--  2.0 unx       22 b- defN 24-Mar-05 14:49 everai/version.py
 -rw-r--r--  2.0 unx       40 b- defN 24-Mar-15 10:09 everai/api/__init__.py
 -rw-r--r--  2.0 unx    14055 b- defN 24-Apr-23 15:30 everai/api/api.py
 -rw-r--r--  2.0 unx      208 b- defN 24-Apr-15 11:24 everai/app/__init__.py
 -rw-r--r--  2.0 unx     3667 b- defN 24-Apr-23 15:20 everai/app/app.py
--rw-r--r--  2.0 unx    11991 b- defN 24-Apr-23 15:32 everai/app/app_manager.py
+-rw-r--r--  2.0 unx    11036 b- defN 24-Apr-24 04:15 everai/app/app_manager.py
 -rw-r--r--  2.0 unx     1851 b- defN 24-Apr-23 15:20 everai/app/app_runner.py
--rw-r--r--  2.0 unx      756 b- defN 24-Apr-23 14:52 everai/app/app_runtime.py
+-rw-r--r--  2.0 unx     3223 b- defN 24-Apr-24 05:08 everai/app/app_runtime.py
 -rw-r--r--  2.0 unx     2568 b- defN 24-Apr-23 14:51 everai/app/app_setup.py
--rw-r--r--  2.0 unx     1675 b- defN 24-Apr-23 15:23 everai/app/autocaling_handler.py
+-rw-r--r--  2.0 unx     1116 b- defN 24-Apr-24 04:14 everai/app/autocaling_handler.py
 -rw-r--r--  2.0 unx     2320 b- defN 24-Apr-23 14:26 everai/app/context.py
 -rw-r--r--  2.0 unx     2965 b- defN 24-Apr-23 09:42 everai/app/service.py
 -rw-r--r--  2.0 unx      210 b- defN 24-Mar-28 12:25 everai/app/typing.py
 -rw-r--r--  2.0 unx      327 b- defN 24-Mar-12 08:39 everai/app/volume_request.py
 -rw-r--r--  2.0 unx      310 b- defN 24-Apr-23 15:52 everai/autoscaling/__init__.py
 -rw-r--r--  2.0 unx      901 b- defN 24-Apr-23 13:29 everai/autoscaling/action.py
 -rw-r--r--  2.0 unx      291 b- defN 24-Apr-23 15:51 everai/autoscaling/autoscaling_policy.py
 -rw-r--r--  2.0 unx      184 b- defN 24-Apr-23 13:29 everai/autoscaling/autoscaling_policy.pyi
 -rw-r--r--  2.0 unx     1943 b- defN 24-Apr-23 08:23 everai/autoscaling/factors.py
 -rw-r--r--  2.0 unx      698 b- defN 24-Apr-16 13:43 everai/autoscaling/session_autoscaling.py
--rw-r--r--  2.0 unx     4193 b- defN 24-Apr-23 16:36 everai/autoscaling/simple_autoscaling.py
+-rw-r--r--  2.0 unx     4666 b- defN 24-Apr-24 07:01 everai/autoscaling/simple_autoscaling.py
 -rw-r--r--  2.0 unx       64 b- defN 24-Mar-29 07:34 everai/autoscaling/wellknown.py
 -rw-r--r--  2.0 unx       55 b- defN 24-Apr-23 06:48 everai/commands/__init__.py
 -rw-r--r--  2.0 unx     1683 b- defN 24-Apr-23 14:04 everai/commands/everai_cli.py
 -rw-r--r--  2.0 unx      163 b- defN 24-Apr-23 04:14 everai/commands/app/__init__.py
--rw-r--r--  2.0 unx     1117 b- defN 24-Apr-23 07:57 everai/commands/app/app.py
+-rw-r--r--  2.0 unx     1187 b- defN 24-Apr-24 06:26 everai/commands/app/app.py
 -rw-r--r--  2.0 unx     1407 b- defN 24-Apr-23 07:57 everai/commands/app/create.py
 -rw-r--r--  2.0 unx      676 b- defN 24-Apr-23 07:57 everai/commands/app/deploy.py
 -rw-r--r--  2.0 unx      765 b- defN 24-Apr-23 07:57 everai/commands/app/get.py
--rw-r--r--  2.0 unx      775 b- defN 24-Apr-23 12:54 everai/commands/app/list.py
+-rw-r--r--  2.0 unx      791 b- defN 24-Apr-24 06:22 everai/commands/app/list.py
 -rw-r--r--  2.0 unx      773 b- defN 24-Apr-23 07:57 everai/commands/app/pause.py
 -rw-r--r--  2.0 unx      729 b- defN 24-Apr-23 07:57 everai/commands/app/prepare.py
+-rw-r--r--  2.0 unx       44 b- defN 24-Apr-24 06:25 everai/commands/app/run.py
 -rw-r--r--  2.0 unx     3004 b- defN 24-Apr-23 07:57 everai/commands/app/upgrade.py
 -rw-r--r--  2.0 unx     1262 b- defN 24-Apr-23 04:14 everai/commands/app/utils.py
 -rw-r--r--  2.0 unx      122 b- defN 24-Apr-23 06:45 everai/commands/auth/__init__.py
 -rw-r--r--  2.0 unx      889 b- defN 24-Apr-23 07:36 everai/commands/auth/login.py
 -rw-r--r--  2.0 unx      555 b- defN 24-Apr-23 07:03 everai/commands/auth/logout.py
 -rw-r--r--  2.0 unx       77 b- defN 24-Apr-23 06:48 everai/commands/autoscaling/__init__.py
 -rw-r--r--  2.0 unx      973 b- defN 24-Apr-23 08:02 everai/commands/autoscaling/autoscaling.py
@@ -44,41 +45,41 @@
 -rw-r--r--  2.0 unx      405 b- defN 24-Apr-23 07:13 everai/commands/command/command.py
 -rw-r--r--  2.0 unx      362 b- defN 24-Apr-16 14:10 everai/commands/command/decorator.py
 -rw-r--r--  2.0 unx     2214 b- defN 24-Apr-23 12:53 everai/commands/command/list_utils.py
 -rw-r--r--  2.0 unx      341 b- defN 24-Apr-23 08:23 everai/commands/command/setup_subcommands.py
 -rw-r--r--  2.0 unx       62 b- defN 24-Apr-23 06:48 everai/commands/config/__init__.py
 -rw-r--r--  2.0 unx      701 b- defN 24-Apr-23 07:02 everai/commands/config/config.py
 -rw-r--r--  2.0 unx       72 b- defN 24-Apr-23 13:57 everai/commands/configmap/__init__.py
--rw-r--r--  2.0 unx     1167 b- defN 24-Apr-23 14:05 everai/commands/configmap/configmap.py
+-rw-r--r--  2.0 unx     1289 b- defN 24-Apr-24 06:23 everai/commands/configmap/configmap.py
 -rw-r--r--  2.0 unx     2008 b- defN 24-Apr-23 14:01 everai/commands/configmap/create.py
 -rw-r--r--  2.0 unx      711 b- defN 24-Apr-23 13:59 everai/commands/configmap/delete.py
 -rw-r--r--  2.0 unx      837 b- defN 24-Apr-23 14:03 everai/commands/configmap/get.py
--rw-r--r--  2.0 unx      707 b- defN 24-Apr-23 14:04 everai/commands/configmap/list.py
+-rw-r--r--  2.0 unx      723 b- defN 24-Apr-24 06:19 everai/commands/configmap/list.py
 -rw-r--r--  2.0 unx       60 b- defN 24-Apr-23 06:49 everai/commands/image/__init__.py
 -rw-r--r--  2.0 unx      734 b- defN 24-Apr-23 09:48 everai/commands/image/build.py
 -rw-r--r--  2.0 unx      831 b- defN 24-Apr-23 07:33 everai/commands/image/image.py
 -rw-r--r--  2.0 unx       54 b- defN 24-Apr-23 06:48 everai/commands/run/__init__.py
 -rw-r--r--  2.0 unx      925 b- defN 24-Apr-23 07:03 everai/commands/run/run.py
 -rw-r--r--  2.0 unx       63 b- defN 24-Apr-23 06:49 everai/commands/secret/__init__.py
 -rw-r--r--  2.0 unx     1840 b- defN 24-Apr-23 07:05 everai/commands/secret/create.py
 -rw-r--r--  2.0 unx      680 b- defN 24-Apr-23 07:05 everai/commands/secret/delete.py
 -rw-r--r--  2.0 unx      965 b- defN 24-Apr-23 07:05 everai/commands/secret/get.py
--rw-r--r--  2.0 unx      761 b- defN 24-Apr-23 13:12 everai/commands/secret/list.py
--rw-r--r--  2.0 unx     1092 b- defN 24-Apr-23 07:33 everai/commands/secret/secret.py
+-rw-r--r--  2.0 unx      777 b- defN 24-Apr-24 06:20 everai/commands/secret/list.py
+-rw-r--r--  2.0 unx     1206 b- defN 24-Apr-24 06:23 everai/commands/secret/secret.py
 -rw-r--r--  2.0 unx       63 b- defN 24-Apr-23 06:49 everai/commands/volume/__init__.py
 -rw-r--r--  2.0 unx      813 b- defN 24-Apr-23 07:08 everai/commands/volume/create.py
 -rw-r--r--  2.0 unx     1679 b- defN 24-Apr-23 07:09 everai/commands/volume/delete.py
 -rw-r--r--  2.0 unx      752 b- defN 24-Apr-23 07:09 everai/commands/volume/get.py
--rw-r--r--  2.0 unx      731 b- defN 24-Apr-23 12:55 everai/commands/volume/list.py
+-rw-r--r--  2.0 unx      747 b- defN 24-Apr-24 06:20 everai/commands/volume/list.py
 -rw-r--r--  2.0 unx     1507 b- defN 24-Apr-23 07:09 everai/commands/volume/pull.py
 -rw-r--r--  2.0 unx      753 b- defN 24-Apr-23 07:09 everai/commands/volume/push.py
--rw-r--r--  2.0 unx     1281 b- defN 24-Apr-23 07:33 everai/commands/volume/volume.py
+-rw-r--r--  2.0 unx     1395 b- defN 24-Apr-24 06:24 everai/commands/volume/volume.py
 -rw-r--r--  2.0 unx       69 b- defN 24-Apr-23 04:08 everai/commands/worker/__init__.py
--rw-r--r--  2.0 unx      894 b- defN 24-Apr-23 13:17 everai/commands/worker/list.py
--rw-r--r--  2.0 unx      746 b- defN 24-Apr-23 07:37 everai/commands/worker/worker.py
+-rw-r--r--  2.0 unx      910 b- defN 24-Apr-24 06:22 everai/commands/worker/list.py
+-rw-r--r--  2.0 unx      851 b- defN 24-Apr-24 06:24 everai/commands/worker/worker.py
 -rw-r--r--  2.0 unx      127 b- defN 24-Apr-23 13:53 everai/configmap/__init__.py
 -rw-r--r--  2.0 unx     1498 b- defN 24-Apr-23 13:52 everai/configmap/configmap.py
 -rw-r--r--  2.0 unx     1479 b- defN 24-Apr-23 13:55 everai/configmap/configmap_manager.py
 -rw-r--r--  2.0 unx      157 b- defN 24-Mar-12 12:47 everai/image/__init__.py
 -rw-r--r--  2.0 unx      483 b- defN 24-Apr-09 08:31 everai/image/auth.py
 -rw-r--r--  2.0 unx     3297 b- defN 24-Apr-23 08:23 everai/image/builder.py
 -rw-r--r--  2.0 unx     1046 b- defN 24-Apr-17 14:47 everai/image/image.py
@@ -100,14 +101,15 @@
 -rw-r--r--  2.0 unx      150 b- defN 24-Mar-29 07:04 everai/utils/bool.py
 -rw-r--r--  2.0 unx     1451 b- defN 24-Apr-23 08:23 everai/utils/cmd.py
 -rw-r--r--  2.0 unx      338 b- defN 24-Apr-15 14:59 everai/utils/datetime.py
 -rw-r--r--  2.0 unx     6189 b- defN 24-Apr-17 09:50 everai/utils/docker_manager.py
 -rw-r--r--  2.0 unx     5417 b- defN 24-Apr-23 08:23 everai/utils/file.py
 -rw-r--r--  2.0 unx     2518 b- defN 24-Apr-23 08:23 everai/utils/list.py
 -rw-r--r--  2.0 unx     1622 b- defN 24-Apr-23 13:20 everai/utils/show_mixin.py
+-rw-r--r--  2.0 unx      238 b- defN 24-Apr-24 05:08 everai/utils/singleton.py
 -rw-r--r--  2.0 unx      515 b- defN 24-Mar-28 11:33 everai/utils/size.py
 -rw-r--r--  2.0 unx      616 b- defN 24-Mar-07 07:12 everai/utils/utils.py
 -rw-r--r--  2.0 unx      153 b- defN 24-Mar-14 15:31 everai/utils/verbose.py
 -rw-r--r--  2.0 unx      107 b- defN 24-Apr-02 06:47 everai/volume/__init__.py
 -rw-r--r--  2.0 unx     5148 b- defN 24-Apr-23 13:05 everai/volume/volume.py
 -rw-r--r--  2.0 unx    14731 b- defN 24-Apr-23 08:23 everai/volume/volume_manager.py
 -rw-r--r--  2.0 unx       55 b- defN 24-Apr-23 13:17 everai/worker/__init__.py
@@ -387,14 +389,14 @@
 -rw-r--r--  2.0 unx     1912 b- defN 24-Mar-28 14:39 generated/volumes/test/test_volume_service_commit_file_body_file.py
 -rw-r--r--  2.0 unx     2548 b- defN 24-Mar-28 14:39 generated/volumes/test/test_volume_service_commit_revision_body.py
 -rw-r--r--  2.0 unx     2233 b- defN 24-Mar-28 14:39 generated/volumes/test/test_volume_service_complete_multipart_upload_body.py
 -rw-r--r--  2.0 unx     1624 b- defN 24-Mar-28 14:39 generated/volumes/test/test_volume_service_create_body.py
 -rw-r--r--  2.0 unx     2149 b- defN 24-Mar-28 14:39 generated/volumes/test/test_volume_service_initialize_multipart_upload_body.py
 -rw-r--r--  2.0 unx     1769 b- defN 24-Mar-28 14:39 generated/volumes/test/test_volume_service_sign_multipart_upload_body.py
 -rw-r--r--  2.0 unx     1968 b- defN 24-Mar-28 14:39 generated/volumes/test/test_volume_service_sign_upload_body.py
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-23 17:06 everai-0.1.31.dist-info/LICENSE
--rw-r--r--  2.0 unx     1941 b- defN 24-Apr-23 17:06 everai-0.1.31.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Apr-23 17:06 everai-0.1.31.dist-info/WHEEL
--rw-r--r--  2.0 unx       98 b- defN 24-Apr-23 17:06 everai-0.1.31.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       17 b- defN 24-Apr-23 17:06 everai-0.1.31.dist-info/top_level.txt
--rw-rw-r--  2.0 unx    39654 b- defN 24-Apr-23 17:06 everai-0.1.31.dist-info/RECORD
-398 files, 1286541 bytes uncompressed, 352553 bytes compressed:  72.6%
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-24 07:15 everai-0.1.32.dist-info/LICENSE
+-rw-r--r--  2.0 unx     1967 b- defN 24-Apr-24 07:15 everai-0.1.32.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-24 07:15 everai-0.1.32.dist-info/WHEEL
+-rw-r--r--  2.0 unx       98 b- defN 24-Apr-24 07:15 everai-0.1.32.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       17 b- defN 24-Apr-24 07:15 everai-0.1.32.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx    39817 b- defN 24-Apr-24 07:15 everai-0.1.32.dist-info/RECORD
+400 files, 1289043 bytes uncompressed, 353317 bytes compressed:  72.6%
```

## zipnote {}

```diff
@@ -96,14 +96,17 @@
 
 Filename: everai/commands/app/pause.py
 Comment: 
 
 Filename: everai/commands/app/prepare.py
 Comment: 
 
+Filename: everai/commands/app/run.py
+Comment: 
+
 Filename: everai/commands/app/upgrade.py
 Comment: 
 
 Filename: everai/commands/app/utils.py
 Comment: 
 
 Filename: everai/commands/auth/__init__.py
@@ -309,14 +312,17 @@
 
 Filename: everai/utils/list.py
 Comment: 
 
 Filename: everai/utils/show_mixin.py
 Comment: 
 
+Filename: everai/utils/singleton.py
+Comment: 
+
 Filename: everai/utils/size.py
 Comment: 
 
 Filename: everai/utils/utils.py
 Comment: 
 
 Filename: everai/utils/verbose.py
@@ -1170,26 +1176,26 @@
 
 Filename: generated/volumes/test/test_volume_service_sign_multipart_upload_body.py
 Comment: 
 
 Filename: generated/volumes/test/test_volume_service_sign_upload_body.py
 Comment: 
 
-Filename: everai-0.1.31.dist-info/LICENSE
+Filename: everai-0.1.32.dist-info/LICENSE
 Comment: 
 
-Filename: everai-0.1.31.dist-info/METADATA
+Filename: everai-0.1.32.dist-info/METADATA
 Comment: 
 
-Filename: everai-0.1.31.dist-info/WHEEL
+Filename: everai-0.1.32.dist-info/WHEEL
 Comment: 
 
-Filename: everai-0.1.31.dist-info/entry_points.txt
+Filename: everai-0.1.32.dist-info/entry_points.txt
 Comment: 
 
-Filename: everai-0.1.31.dist-info/top_level.txt
+Filename: everai-0.1.32.dist-info/top_level.txt
 Comment: 
 
-Filename: everai-0.1.31.dist-info/RECORD
+Filename: everai-0.1.32.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## everai/app/app_manager.py

```diff
@@ -103,19 +103,21 @@
 
         flask_app.register_blueprint(everai_blueprint)
 
     def run_autoscaling(self, app: typing.Optional[App] = None, *args, **kwargs):
         app = app or must_find_target(target_type=App)
         assert app.autoscaling_policy is not None
 
+        print("------ run_autoscaling ------ ")
         flask_app = Flask(app.name)
         app, runtime = self.prepare_secrets_configmaps(app)
+        runtime.start_update()
 
-        register_autoscaling_handler(flask_app, app, self.prepare_secrets_configmaps)
-        AppManager.start_http_server(flask_app=flask_app, *args, **kwargs)
+        register_autoscaling_handler(flask_app, app)
+        AppManager.start_http_server(flask_app=flask_app, cb=lambda: runtime.stop_update(), *args, **kwargs)
 
     @staticmethod
     def start_http_server(flask_app: Flask, cb: typing.Optional[typing.Callable[[], None]] = None, *args,
                           **kwargs):
 
         port = kwargs.pop('port', 8866)
         listen = kwargs.pop('listen', '0.0.0.0')
@@ -145,24 +147,29 @@
                                           ))
         prepare_thread.start()
 
         flask_app = Flask(app.name)
         self.everai_handler(flask_app)
         app.service.create_handler(flask_app)
 
-        AppManager.start_http_server(flask_app=flask_app, cb=app.do_clear, *args, **kwargs)
+        def final_clear():
+            app.do_clear()
+            app.runtime.stop_update()
+
+        AppManager.start_http_server(flask_app=flask_app, cb=final_clear, *args, **kwargs)
 
     def prepare_secrets_configmaps(self,
                                    app: typing.Optional[App] = None) -> typing.Tuple[App, AppRuntime]:
         app = app or must_find_target(target_type=App)
         runtime = AppRuntime()
         self.prepare_secrets(app, runtime)
         self.prepare_configmaps(app, runtime)
         runtime.volume_manager = self.volume_manager
         runtime.secret_manager = self.secret_manager
+        runtime.configmap_manager = self.configmap_manager
         runtime.is_prepare_mode = False
         runtime.volumes = []
         app.runtime = runtime
         return app, runtime
 
     def prepare(self,
                 app: typing.Optional[App] = None,
@@ -173,14 +180,15 @@
         runtime.is_prepare_mode = is_prepare_mode
         self.prepare_volumes(app, runtime)
 
         app.do_prepare()
         print('prepare finished')
         if len(app.service.routes) > 0 and not is_prepare_mode:
             self._running = True
+            runtime.start_update()
 
     def delete(self, app_name: str) -> None:
         self.api.delete_app(app_name)
 
     def list(self) -> typing.List[App]:
         return [App.from_proto(app) for app in self.api.list_apps()]
 
@@ -222,37 +230,14 @@
             cuda_constraints=resource_requests.cuda_version_constraints,
             driver_version_constraints=resource_requests.driver_version_constraints,
         ))
 
     @deprecation.deprecated(details='setup_autoscaling_policy is deprecated, don not use it again')
     def setup_autoscaling_policy(self, app_name: str, autoscaling_policy: typing.Optional[AutoScalingPolicy]):
         ...
-        # maybe use restrictedpython is more make sense
-        # if autoscaling_policy is None:
-        #     self.api.setup_autoscaling_policy(app_name=app_name)
-        # else:
-        #     obj = jsonpickle.dumps(autoscaling_policy)
-        #     print(obj)
-        #     sourcefile = inspect.getsourcefile(autoscaling_policy.__class__)
-        #     with open(sourcefile, 'r') as f:
-        #         sourcecode = f.read()
-        #
-        #     print(sourcecode)
-        #     bin = compile(sourcecode, os.path.basename(sourcefile), 'exec')
-        #     print(bin)
-        #
-        #     raise RuntimeError(f"Autoscaling policy")
-        #
-        #     assert isinstance(autoscaling_policy, SimpleAutoScalingPolicy)
-        #     self.api.setup_autoscaling_policy(app_name=app_name,
-        #                                       min_workers=autoscaling_policy.min_workers,
-        #                                       max_workers=autoscaling_policy.max_workers,
-        #                                       max_queue_size=autoscaling_policy.max_queue_size,
-        #                                       max_idle_time=autoscaling_policy.max_idle_time,
-        #                                       )
 
     def deploy(self, app: typing.Optional[App]):
         app = app or must_find_target(target_type=App)
 
         try:
             self.api.get_app(app.name)
         except ApiException as e:
```

## everai/app/app_runtime.py

```diff
@@ -1,24 +1,97 @@
+import datetime
+import threading
 import typing
+
 from everai.app.context import Context
-from everai.configmap import ConfigMap
+from everai.configmap import ConfigMap, ConfigMapManager
+from everai.logger import logger
 from everai.secret import Secret, SecretManager
+from everai.utils.singleton import Singleton
 from everai.volume import Volume, VolumeManager
+from timeloop import Timeloop
+
 
+tl: Timeloop = Timeloop()
 
-class AppRuntime:
+
+class AppRuntime(metaclass=Singleton):
     secrets: typing.Dict[str, Secret]
     configmaps: typing.Dict[str, ConfigMap]
     volumes: typing.Dict[str, Volume]
+
+    is_prepare_mode: bool
+
     volume_manager: VolumeManager
     secret_manager: SecretManager
-    is_prepare_mode: bool
+    configmap_manager: ConfigMapManager
+
+    _lock: threading.Lock
+    _update_running: bool
+
+    # def __new___(cls, *args, **kwargs):
+    #     if not hasattr(cls, 'instance'):
+    #         cls.instance = super(AppRuntime, cls).__new__(cls, *args, **kwargs)
+    #     return cls.instance
 
     def __init__(self):
-        pass
+        self._lock = threading.Lock()
+        self.tl = Timeloop()
+        self._update_running = False
+        print('AppRuntime construct')
+        tl.job(interval=datetime.timedelta(seconds=30))(self._update_routine)
 
     def context(self) -> Context:
         return Context(secrets=self.secrets,
                        configmaps=self.configmaps,
                        volumes=self.volumes,
                        volume_manager=self.volume_manager,
                        is_prepare_mode=self.is_prepare_mode)
+
+    def update_secrets(self, secrets: typing.List[str]):
+        try:
+            prepared_secrets: typing.Dict[str, Secret] = {}
+            for name in secrets:
+                secret = self.secret_manager.get(name=name)
+                prepared_secrets[secret.name] = secret
+            with self._lock:
+                self.secrets = prepared_secrets
+        except Exception as e:
+            logger.error(f'update secrets got error, {e}, ignore update')
+
+    def update_configmaps(self, configmaps: typing.List[str]):
+        try:
+            prepared_configmaps: typing.Dict[str, ConfigMap] = {}
+            for name in configmaps:
+                configmap = self.configmap_manager.get(name=name)
+                prepared_configmaps[name] = configmap
+            with self._lock:
+                self.configmaps = prepared_configmaps
+        except Exception as e:
+            logger.error(f'update configmaps got error, {e}, ignore update')
+
+    @property
+    def update_running(self) -> bool:
+        return self._update_running
+
+    def _update_routine(self):
+        print('enter update routine')
+        secrets = list(self.secrets.keys())
+        configmaps = list(self.configmaps.keys())
+        self.update_secrets(secrets)
+        self.update_configmaps(configmaps)
+
+    def start_update(self):
+        print('start_update')
+        with self._lock:
+            if not self._update_running:
+                tl.start()
+                self._update_running = True
+                print("update job started")
+
+    def stop_update(self):
+        print('stop_update')
+        with self._lock:
+            if self._update_running:
+                tl.stop()
+                self._update_running = False
+                print("update job stopped")
```

## everai/app/autocaling_handler.py

```diff
@@ -3,45 +3,22 @@
 
 import flask
 from flask import Flask, Blueprint
 
 from everai.app.app import App
 from everai.app.context import service_context
 from everai.autoscaling import Factors
-import typing
 
-UPDATE_FREQUENCY = 60
 
-
-update_time: datetime.datetime
-
-UpdateFunction = typing.Callable[[App], typing.Tuple]
-
-
-def register_autoscaling_handler(flask_app: Flask, app: App, f: UpdateFunction):
+def register_autoscaling_handler(flask_app: Flask, app: App):
     assert hasattr(app.autoscaling_policy, 'decide')
     decide = getattr(app.autoscaling_policy, 'decide')
     assert callable(decide)
 
     everai_blueprint = Blueprint('everai-autoscaling', __name__, url_prefix='/-everai-')
-    global update_time
-    update_time = datetime.datetime.now()
-
-    def update_function():
-        f(app)
-        print('update finished')
-
-    @everai_blueprint.before_request
-    def update_runtime():
-        global update_time
-        now = datetime.datetime.now()
-        if (now - update_time).seconds > UPDATE_FREQUENCY:
-            update_time = now
-            reload_thread = threading.Thread(target=update_function)
-            reload_thread.start()
 
     @everai_blueprint.route('/autoscaling', methods=['POST'])
     def autoscaling():
         data = flask.request.data
 
         try:
             factors = Factors.from_json(data)
@@ -53,7 +30,8 @@
                 result = decide(factors)
         except Exception as e:
             return f'Internal Server Error, {e}', 500
 
         return flask.Response(result.json(), mimetype='application/json')
 
     flask_app.register_blueprint(everai_blueprint)
+    print(f'handler is /-everai-/autoscaling')
```

## everai/autoscaling/simple_autoscaling.py

```diff
@@ -55,25 +55,34 @@
         scale_up_step = int(self.get_argument('scale_up_step'))
 
         return min_workers, max_workers, max_queue_size, max_idle_time, scale_up_step
 
     @staticmethod
     def should_scale_up(factors: Factors, max_queue_size: int) -> bool:
         busy_count = 0
+
+        # don't do scale up again
+        in_flights = [worker for worker in factors.workers if worker.status == WorkerStatus.Inflight]
+        if len(in_flights) > 0:
+            return False
+
         for req in factors.queue.requests:
             if req.queue_reason == QueueReason.QueueDueBusy:
                 busy_count += 1
         return busy_count > max_queue_size
 
     def decide(self, factors: Factors) -> DecideResult:
         min_workers, max_workers, max_queue_size, max_idle_time, scale_up_step = self.get_arguments()
+        print(f'min_workers: {min_workers}, max_workers: {max_workers}, '
+              f'max_queue_size: {max_queue_size}, max_idle_time: {max_idle_time}, scale_up_step: {scale_up_step}')
 
         now = int(datetime.now().timestamp())
         # scale up to min_workers
         if len(factors.workers) < min_workers:
+            print(f'workers {len(factors.workers)} less than min_workers {min_workers}')
             return DecideResult(
                 max_workers=max_workers,
                 actions=[ScaleUpAction(count=min_workers - len(factors.workers))],
             )
 
         # ensure after scale down, satisfied the max_workers
         max_scale_up_count = max_workers - len(factors.workers)
```

## everai/commands/app/app.py

```diff
@@ -5,29 +5,31 @@
 from .get import GetCommand
 from .deploy import DeployCommand
 from .pause import PauseCommand
 from .upgrade import UpgradeCommand
 from .prepare import PrepareCommand
 from .list import ListCommand
 from everai.commands.command import setup_subcommands
+from .run import RunCommand
 
 
 class AppCommand(ClientCommand):
     parser: _SubParsersAction = None
 
     def __init__(self, args):
         self.args = args
 
     @staticmethod
     def setup(parser: _SubParsersAction):
-        app_parser = parser.add_parser('app', help='Manage app')
+        app_parser = parser.add_parser('app', aliases=['apps'], help='Manage app')
         app_subparser = app_parser.add_subparsers(help='App command help')
 
         setup_subcommands(app_subparser, [
             CreateCommand,
+            RunCommand,
             GetCommand,
             UpgradeCommand,
             PauseCommand,
             DeployCommand,
             PauseCommand,
             PrepareCommand,
             ListCommand,
```

## everai/commands/app/list.py

```diff
@@ -13,15 +13,15 @@
 
 class ListCommand(ClientCommand):
     def __init__(self, args):
         self.args = args
 
     @staticmethod
     def setup(parser: _SubParsersAction):
-        list_parser = parser.add_parser("list", help="List all apps")
+        list_parser = parser.add_parser('list', aliases=['ls'], help='List all apps')
         ListDisplayer.add_output_to_parser(list_parser)
         list_parser.set_defaults(func=ListCommand)
 
     @command_error
     def run(self):
         from tabulate import tabulate
         apps = AppManager().list()
```

## everai/commands/configmap/configmap.py

```diff
@@ -10,15 +10,17 @@
     parser: _SubParsersAction = None
 
     def __init__(self, args):
         self.args = args
 
     @staticmethod
     def setup(parser: _SubParsersAction):
-        configmap_parser = parser.add_parser('configmap', help='Manage configmaps')
+        configmap_parser = parser.add_parser('configmap',
+                                             aliases=['cm', 'configmaps'],
+                                             help='Manage configmaps')
         configmap_subparser = configmap_parser.add_subparsers(help="Configmap command help")
 
         setup_subcommands(configmap_subparser, [
             ConfigMapCreateCommand,
             ConfigMapDeleteCommand,
             ConfigMapListCommand,
             ConfigMapGetCommand,
```

## everai/commands/configmap/list.py

```diff
@@ -6,15 +6,15 @@
 
 class ConfigMapListCommand(ClientCommand):
     def __init__(self, args):
         self.args = args
 
     @staticmethod
     def setup(parser: _SubParsersAction):
-        list_parser = parser.add_parser('list', help='List configmaps')
+        list_parser = parser.add_parser('list', aliases=['ls'], help='List configmaps')
         ListDisplayer.add_output_to_parser(list_parser)
         list_parser.set_defaults(func=ConfigMapListCommand)
 
     @command_error
     def run(self):
         configmaps = ConfigMapManager().list()
         ListDisplayer[ConfigMap](configmaps).show_list(self.args.output)
```

## everai/commands/secret/list.py

```diff
@@ -9,15 +9,15 @@
 
 class SecretListCommand(ClientCommand):
     def __init__(self, args):
         self.args = args
 
     @staticmethod
     def setup(parser: _SubParsersAction):
-        list_parser = parser.add_parser('list', help='List secret')
+        list_parser = parser.add_parser('list', aliases=['ls'], help='List secret')
         ListDisplayer.add_output_to_parser(list_parser)
         list_parser.set_defaults(func=SecretListCommand)
 
     @command_error
     def run(self):
         secrets = SecretManager().list()
         ListDisplayer[Secret](secrets).show_list(self.args.output)
```

## everai/commands/secret/secret.py

```diff
@@ -10,15 +10,17 @@
     parser: _SubParsersAction = None
 
     def __init__(self, args):
         self.args = args
 
     @staticmethod
     def setup(parser: _SubParsersAction):
-        secret_parser = parser.add_parser('secret', help='Manage secrets')
+        secret_parser = parser.add_parser('secret',
+                                          aliases=['secrets', 'sec'],
+                                          help='Manage secrets')
         secret_subparser = secret_parser.add_subparsers(help="Secret command help")
 
         setup_subcommands(secret_subparser, [
             SecretCreateCommand,
             SecretDeleteCommand,
             SecretListCommand,
             SecretGetCommand,
```

## everai/commands/volume/list.py

```diff
@@ -7,15 +7,15 @@
 
 class VolumeListCommand(ClientCommand):
     def __init__(self, args):
         self.args = args
 
     @staticmethod
     def setup(parser: _SubParsersAction):
-        list_parser = parser.add_parser('list', help='List volume')
+        list_parser = parser.add_parser('list', aliases=['ls'], help='List volume')
         ListDisplayer.add_output_to_parser(list_parser)
 
         list_parser.set_defaults(func=VolumeListCommand)
 
     @command_error
     def run(self):
         volumes = VolumeManager().list_volumes()
```

## everai/commands/volume/volume.py

```diff
@@ -12,15 +12,17 @@
     parser: _SubParsersAction = None
 
     def __init__(self, args):
         self.args = args
 
     @staticmethod
     def setup(parser: _SubParsersAction) -> None:
-        volume_parser = parser.add_parser('volume', help='Manage volume')
+        volume_parser = parser.add_parser('volume',
+                                          aliases=['volumes', 'vol'],
+                                          help='Manage volume')
         volume_subparser = volume_parser.add_subparsers(help='Volume command help')
 
         setup_subcommands(volume_subparser, [
             VolumeCreateCommand,
             VolumeListCommand,
             VolumeDeleteCommand,
             VolumeGetCommand,
```

## everai/commands/worker/list.py

```diff
@@ -10,15 +10,15 @@
 class ListCommand(ClientCommand):
     def __init__(self, args):
         self.args = args
 
     @staticmethod
     @app_detect(optional=True)
     def setup(parser: _SubParsersAction, app: typing.Optional[App]):
-        list_parser = parser.add_parser("list", help="List workers of app")
+        list_parser = parser.add_parser('list', aliases=['ls'], help='List workers of app')
         add_app_name_to_parser(list_parser, app)
         ListDisplayer.add_output_to_parser(list_parser)
 
         list_parser.set_defaults(func=ListCommand)
 
     @command_error
     def run(self):
```

## everai/commands/worker/worker.py

```diff
@@ -8,15 +8,17 @@
     parser: _SubParsersAction = None
 
     def __init__(self, args):
         self.args = args
 
     @staticmethod
     def setup(parser: _SubParsersAction):
-        worker_parser = parser.add_parser('worker', help='Manage the worker of app')
+        worker_parser = parser.add_parser('worker',
+                                          aliases=['workers'],
+                                          help='Manage the worker of app')
         worker_subparser = worker_parser.add_subparsers(help='Worker command help')
 
         setup_subcommands(worker_subparser, [
             ListCommand,
         ])
 
         worker_parser.set_defaults(func=WorkerCommand)
```

## Comparing `everai-0.1.31.dist-info/METADATA` & `everai-0.1.32.dist-info/METADATA`

 * *Files 4% similar despite different names*

```diff
@@ -1,13 +1,13 @@
 Metadata-Version: 2.1
 Name: everai
-Version: 0.1.31
+Version: 0.1.32
 Summary: Client library to manage EvenMachine ai infrastructure
-Author-email: mc <mc@evermachine.io>
-Maintainer-email: mc <mc@evermachine.io>
+Author-email: mc <mc@expvent.com>
+Maintainer-email: mc <mc@expvent.com>
 Project-URL: Homepage, https://evermachine.io
 Project-URL: Documentation, https://evermachine.io
 Project-URL: Repository, https://github.com/evermachine/everai
 Project-URL: Issues, https://github.com/evermachine/everai/issues
 Project-URL: Changelog, https://github.com/evermachine/everai/blob/main/CHANGELOG.md
 Keywords: evermachine,ever,everai,ai,inference,serveless,autoscaling
 Classifier: Development Status :: 4 - Beta
@@ -26,14 +26,15 @@
 Requires-Dist: python-dotenv ~=1.0.1
 Requires-Dist: gevent ~=24.2.1
 Requires-Dist: pymongo ~=4.6.2
 Requires-Dist: argcomplete ~=3.3.0
 Requires-Dist: tabulate ~=0.9.0
 Requires-Dist: deprecation ~=2.1.0
 Requires-Dist: pyyaml ~=6.0.1
+Requires-Dist: timeloop ~=1.0.2
 Requires-Dist: urllib3 >=1.26.0
 Requires-Dist: python-dateutil ~=2.9.0.post0
 Requires-Dist: pydantic ~=2.7.0
 Provides-Extra: build
 Requires-Dist: build ~=1.2.1 ; extra == 'build'
 Requires-Dist: wheel ~=0.41.2 ; extra == 'build'
 Requires-Dist: twine ~=5.0.0 ; extra == 'build'
```

## Comparing `everai-0.1.31.dist-info/RECORD` & `everai-0.1.32.dist-info/RECORD`

 * *Files 2% similar despite different names*

```diff
@@ -1,41 +1,42 @@
 everai/__init__.py,sha256=Jzb_RfgvXCrm_SQ4AfeGVi1N36YybxnM5mpyxrnihgI,33
 everai/constants.py,sha256=GfhnCcPgJXJyTMWAuQWszwSxsrb3yYZiFFoQGvA5x7s,1077
 everai/version.py,sha256=Hyn9pFqgU-fsYGrkhn6G5lx1iEiL8AI0rQGNXDrq1is,22
 everai/api/__init__.py,sha256=2WLrQ_PpJ35__yOVHC89MhILujyGioyaGir-5n6hxCc,40
 everai/api/api.py,sha256=HKMYo37SZxQo-aeqrIA5S0AKKoxGxkKhhejXBR3-y2o,14055
 everai/app/__init__.py,sha256=A-USWcj6TDAW_hxG6wT3Qb8m3d5Tq733WWC9McNhlGI,208
 everai/app/app.py,sha256=fweD6GNTR0vCCFvYDXSzZOIcphOEhM5nOlcXDA_kB3M,3667
-everai/app/app_manager.py,sha256=-I8oDmv-c2ThTP6CeClFVCWcmgCDQnZL00yjphhJG9w,11991
+everai/app/app_manager.py,sha256=48c2Ws6Q3_28QUUKrB5gSQF-rw4F1A9C-2qcbieywaA,11036
 everai/app/app_runner.py,sha256=Fk3_tQsvyfLE22dJewZce38VkON4h-KnSaYR7FGNXek,1851
-everai/app/app_runtime.py,sha256=MOGSYgsqJSfmpaBwZ3MnAYtKHfyJDPDJ-qeqnuD60h8,756
+everai/app/app_runtime.py,sha256=zyj63A6VfM1P3WL7LVW_mcy9xmMwKueKzTcJduGMwSo,3223
 everai/app/app_setup.py,sha256=CLXAC83OyTqEjAEKNLHQaCT3UPhvw149mD1VQr-AEEg,2568
-everai/app/autocaling_handler.py,sha256=No3a-qVGHq4uCeILo6TcCFSBf8nfdFpNsXUjLcwBMXs,1675
+everai/app/autocaling_handler.py,sha256=Exsdti0N16GlcqXIILJ1qa6_DN9cBwzWpahukDKiqEo,1116
 everai/app/context.py,sha256=BIZ0FOozDTVCZg-cWMUnpf9DEjKF2r5T1MRF8yWreG4,2320
 everai/app/service.py,sha256=tn202UvWjK3Zr34MTQB_XhrGwXYe-NqgQtdTFncrgYk,2965
 everai/app/typing.py,sha256=d7tPA7VoDY771u-v0DLwD6TTMfPotg8u_PAshDcHRQo,210
 everai/app/volume_request.py,sha256=BjyGnehuqDxXVqdc1Xq0CL0GMT-r2IExe2bmyCMVXSU,327
 everai/autoscaling/__init__.py,sha256=7KlzpxRDIFkIdEoh5Rjw32rhCGtbIqv_oN_JSHajqFY,310
 everai/autoscaling/action.py,sha256=Hat74A4kk4BMjZAAdIcX5yr1CQm64BaNhOE3t7ooJ7Q,901
 everai/autoscaling/autoscaling_policy.py,sha256=i-znbnCG3w1ovmInhFlEwDdC54MFQ3Q9qhvK86jboIE,291
 everai/autoscaling/autoscaling_policy.pyi,sha256=u_OuXVbYDdu09a-ej0j3eURTMeKfJuqvEOHGB8kifG8,184
 everai/autoscaling/factors.py,sha256=9Dg0ZpcAI2TpRSEtHaLvDK7umKGWn1FiQ004nucl8kA,1943
 everai/autoscaling/session_autoscaling.py,sha256=tnNs91zBLFfWA7kuvlJEs5eQ_MHUUa6R0UAXhxOBEc0,698
-everai/autoscaling/simple_autoscaling.py,sha256=nIVxB4v61BsVxBZEJCRGhEAzXR48o84ui_qnhbDM8Z0,4193
+everai/autoscaling/simple_autoscaling.py,sha256=ts9G4oNmBRVdSCodIuor5N2_rsuq373j2pmoC-ke380,4666
 everai/autoscaling/wellknown.py,sha256=kUa7XlknGph-XR_qjI2PpEAcNYANXtlXctvHi-OsxVM,64
 everai/commands/__init__.py,sha256=o1tcmQ2Hds3eW_8ybbs39rlUWh5uu0dQ4DkgdEnoMGI,55
 everai/commands/everai_cli.py,sha256=3-FEdOHXG5Tu5Kfm_Z_JnDaJOXn-AbEeowzfBP47PHU,1683
 everai/commands/app/__init__.py,sha256=bZsGYyqZz9ewwBfaEknc6dp8H7_z-QmXK5IyuAEfNto,163
-everai/commands/app/app.py,sha256=yLSya37WNgX_tER5ZT_vtvVqIWqCN05OIho-yuZjj88,1117
+everai/commands/app/app.py,sha256=_QUKmvb4FFMwSBlAGytDDOi7ZhyckMD3SYmk7RDD7k4,1187
 everai/commands/app/create.py,sha256=KEN7KV0yHCqmwFmEqq2EB8b-gQ-Z8pny4joBBG4xr6A,1407
 everai/commands/app/deploy.py,sha256=o0yF3qHbpqwcMn5TY83UbZkwCPIt4UA8ckmxHQDCl9o,676
 everai/commands/app/get.py,sha256=wXmC_s4e5ed9q1INNFbAiZHhuGccWAYedfMIiGO60_0,765
-everai/commands/app/list.py,sha256=eOK-5C3dhFn9lG-c7Yr7vqT1lTJ2-LtmdGtw99ZFusk,775
+everai/commands/app/list.py,sha256=UVx8-T01eBIicX6Xi6BXtnOc6qe3pVqE6GmiL93bgp8,791
 everai/commands/app/pause.py,sha256=LtQrxglQ9kgM0k_h05RaV9ZzRv18kiMY3pn33Xm4B68,773
 everai/commands/app/prepare.py,sha256=arylXcUOm_HsDCRuHS92r2gXlAjEUDAKO_0J4wj-Oxw,729
+everai/commands/app/run.py,sha256=jPLggCCUvaKnOyowoLtciaR_HAxskdBy01CGzrqhbw4,44
 everai/commands/app/upgrade.py,sha256=QsJzsEsleD7Ho7NxZCeZ54a6WahOfkv_Qz0JqVGIuYA,3004
 everai/commands/app/utils.py,sha256=lrl1tNQyzwthnQ5pr-l2cDODBL5FdgdGdotK1bv8ACg,1262
 everai/commands/auth/__init__.py,sha256=lTEAm89J1giJt5lSjIQK8O5eOznEtji5MEOaq9WLt38,122
 everai/commands/auth/login.py,sha256=XuIsxMz7Y6AXsR2R5I9kv7_WYyckRErcWoY9PaAWmTc,889
 everai/commands/auth/logout.py,sha256=Ghu-xv9oruO0Pr-PuFqTbkkssI4_WH1t59GhR5nnfyc,555
 everai/commands/autoscaling/__init__.py,sha256=Z8wRlDu6q3cJtidYmrhAOD8e1fxtU6N6RuSzd0lkxn8,77
 everai/commands/autoscaling/autoscaling.py,sha256=UpuVl3rj7XsBf03BQ3ydANO6yGeaXPhOHekT0yrK_Z4,973
@@ -43,41 +44,41 @@
 everai/commands/command/command.py,sha256=7H3jMPHknnBDaxxn-SMOnxgMTMuk4hc-5ssrcHx2vnI,405
 everai/commands/command/decorator.py,sha256=cjG5ZBsgnhBs2vt_p5VwOG6RzDWW-I4c_AAFBtQ4AU4,362
 everai/commands/command/list_utils.py,sha256=hwx_bRD2tCrU7EmoM0ykO2feJj3Sr4dvkdzuOPYYT2Y,2214
 everai/commands/command/setup_subcommands.py,sha256=dt3OZ5jPQ9gFIgR_23C0fybtMrjeRmnR4mG27YOI5VY,341
 everai/commands/config/__init__.py,sha256=61pHrxuovd2Rz4wKj9MPbHWV8UuWIrZcUn2tTa15eGA,62
 everai/commands/config/config.py,sha256=xzEyyTWu-igHIOINKkwobqhMeYZhq3jlfNZnb3elX6o,701
 everai/commands/configmap/__init__.py,sha256=LhvxscGN2UkW59o2xdEmuemTioxZLRWUTrdCqycD4Gk,72
-everai/commands/configmap/configmap.py,sha256=0nj0tjRbUONpjv7vT-2_DoZImGAzqY9sqjw-9AIwsoU,1167
+everai/commands/configmap/configmap.py,sha256=tsaqRfLvSySGF-hGtllgXryPQTd1VJP4uW66qKEQhTM,1289
 everai/commands/configmap/create.py,sha256=cpm0Cytfv5TsHQZSiwvgkVt6qWeWlix1mbngdhu3LNI,2008
 everai/commands/configmap/delete.py,sha256=0CQI7wtH0cnTV_YQ5B8HDft6wYm6aykLwJjqvt3Upxg,711
 everai/commands/configmap/get.py,sha256=ix62gr_FpU9WcT0sjL8nfS94c14iPFsAOb7IRJG5L34,837
-everai/commands/configmap/list.py,sha256=wGg0rMbV5YQkWiIzQ2HbkMILfUlH9f1qGuN3-YuDUjU,707
+everai/commands/configmap/list.py,sha256=hwhnH9FzAsABA73ub6eQxvEaEvCnZAKYyum_dYiw_-w,723
 everai/commands/image/__init__.py,sha256=gEvksUFimk0y9_a1D78kgxR74FmjqqvMnoEW4lbV9QM,60
 everai/commands/image/build.py,sha256=xtmpYT_ooxmQfcJshdPUYbvQ1ueCPX9Wy4t3kxTB6lc,734
 everai/commands/image/image.py,sha256=J_GWCLdmyUzCJ0J60h1n6bohDLnEiyFCErAycPiBvBo,831
 everai/commands/run/__init__.py,sha256=K0Z4YQiwfP1S7Ac-0YyxnnRatfTJ2WKe7Nbs-qMyw7k,54
 everai/commands/run/run.py,sha256=weCezbI9fX4Hsc-Qw2uUf4mzzfiIcsJEWfAX2YI0r8A,925
 everai/commands/secret/__init__.py,sha256=O4Tj-pg2EGxcF7y_HWLsY0PAxE-cB09iGmyzrvaALiI,63
 everai/commands/secret/create.py,sha256=ztJtQikFFF7C4YHQkQP-EtxSzMIMhR40D-MrGUg427w,1840
 everai/commands/secret/delete.py,sha256=JhmqYyywPzq67rAutojGoIyJSduecJG522QTT1-6haE,680
 everai/commands/secret/get.py,sha256=pgXYDaU25bMzJnJbrKx6iGiVIZn84-iDU0b6pOfllf0,965
-everai/commands/secret/list.py,sha256=X_UMKUmyY06bIx_p3cLu6V8rEh2RyYTyEkKKFESjXmI,761
-everai/commands/secret/secret.py,sha256=WkRj_CAFpM6lXO5COAJydNulUczV198qoLt8WAMx3Dg,1092
+everai/commands/secret/list.py,sha256=_XyAO8hmK3KkMRpJgYcfD_6pU4wFKdlSYWiORZbgzrQ,777
+everai/commands/secret/secret.py,sha256=-8vvk02gr9st6-ocCDgxb586nLkC_mpPllq9Nl68jDk,1206
 everai/commands/volume/__init__.py,sha256=UlxXpx7spko6zt5QASgQf3FvKMFWVDs0z6kc9ET_Z3M,63
 everai/commands/volume/create.py,sha256=zX4Jnx81NQjK82tZsatl-ZCtQKKf5mcMz2TTRmg4Szo,813
 everai/commands/volume/delete.py,sha256=OzKZ9AN4tHQO9orWhUeIxgVxfhHgGDKWF2PG95yHgC8,1679
 everai/commands/volume/get.py,sha256=ruLx6zRKnmUZdpXhxHF2C1XIVgGaa1zLlnfU-nX0bfE,752
-everai/commands/volume/list.py,sha256=BYhaKuz9L8eeOhlktjRDsEftM-O0pzUcQUYUYGr6KAw,731
+everai/commands/volume/list.py,sha256=YmjnCWIl3pyDxE-F7rOmhDZu2PrlGFsR6MacnJlOFmY,747
 everai/commands/volume/pull.py,sha256=sJKByR1qWxCreb6BMj3kfbhM7w2UuO5eKySDMPtp7lQ,1507
 everai/commands/volume/push.py,sha256=lH_EB0joXOKGY4lPalWkmAPnCesDiytfhzfW_0E4jQA,753
-everai/commands/volume/volume.py,sha256=-7Ib37gLT-dzJbfY23tZ0_Uv024zWeTg3StU0vMGU-E,1281
+everai/commands/volume/volume.py,sha256=k6aTAZBo1TZGoTRRJUhVMaWglUey5nTJQm94m8-FBz8,1395
 everai/commands/worker/__init__.py,sha256=8Sswddw1RHWdpl7AHrktEodBITDspvtESL0GnPI0Oo0,69
-everai/commands/worker/list.py,sha256=NQyVmmcywYZjg69Gv8QLADRbUFUoTS1te8R16K8zofI,894
-everai/commands/worker/worker.py,sha256=-8gyjTTY18-V2QERAqLwk3-kf7HaseyAhOemGIZ_4_U,746
+everai/commands/worker/list.py,sha256=K1LrybGwRpm54JndgC1Kn0tkY4FxLy-eAZ47xSAE_s4,910
+everai/commands/worker/worker.py,sha256=pInYtKYjueNPPzuMNSBwbAWOPCdnL-DYBdF6VSlCfM8,851
 everai/configmap/__init__.py,sha256=vxD7awli4BPSNCWA17I5_zTcNRZ5U0eHNr05WeIUGMU,127
 everai/configmap/configmap.py,sha256=zZnYKH7aZd2DCeGSyu9kEExwTI5bpXlcQjufDk5e1-g,1498
 everai/configmap/configmap_manager.py,sha256=VDulfQsMBlHeBZxbaJ2JuIXbbNMvK57U4JBYQsO5Hr8,1479
 everai/image/__init__.py,sha256=vJJvzDkVDL538QQDc5QpbOKVNUCLgE4SlpotcoSmuqE,157
 everai/image/auth.py,sha256=Gi2ljWsVAoLaECQd1mFoCGBdi3g1e47g3loqwnK-iAo,483
 everai/image/builder.py,sha256=ZX43bDS71fBnh-oTAIRJKtFy4NCU8wETFH4B-5jjgvE,3297
 everai/image/image.py,sha256=XZ-L52PQu9whVZsexdYwT4au07ZVdgUMBQJrBKn2hJI,1046
@@ -99,14 +100,15 @@
 everai/utils/bool.py,sha256=FhWoDUvb-3cUJuMkEwPoRLykUMsgwcEe-vi_KzbYtcw,150
 everai/utils/cmd.py,sha256=M-tWnwworr6heXZAC_62U2rxzzfKXVgNJaG7pilg0P0,1451
 everai/utils/datetime.py,sha256=v9CwIoXfcsT3oBCr7yiBqOqg4C4VLsguhJEITRT0HCg,338
 everai/utils/docker_manager.py,sha256=L0k8D9n2wVyW0tuwhsVo8uG2wWoUrSJvxYVODwtNvKs,6189
 everai/utils/file.py,sha256=gQKIIlQs7YFrQ_1atW8_GGkMB6zSUCMdF-1PJtqWm7o,5417
 everai/utils/list.py,sha256=zmPSWbdwvarZk4drh98VrTLqIgRh5-s4uWQEieanPLI,2518
 everai/utils/show_mixin.py,sha256=orBCuEDl1GrexRFql6IrwMNuOX8ZiKMz-R03fevk7KE,1622
+everai/utils/singleton.py,sha256=OGYIM0bx1kjg71dJK_X9LdFijE1PUKpJzvmcpP0puY8,238
 everai/utils/size.py,sha256=z1WQblKfACpj2wT6Wn-yzjBgklhStiOoJ9cxUgCp-Zw,515
 everai/utils/utils.py,sha256=bo-H50MC67Xs-F-64pAqEIF2epuTy8KkzdMKm2W_-W4,616
 everai/utils/verbose.py,sha256=aQ-nRJaMvhAia7Id_kM-2d5CHij4vudJdKSfyiSnHlw,153
 everai/volume/__init__.py,sha256=_nJ-S-Sgec1jY6byu-u9EOYE7-_1iaMj-kcM-v6pTaY,107
 everai/volume/volume.py,sha256=lW0-z0eIFhMKcz1dSPKMBNMXuQq_a17lTph6gO3Xh0Y,5148
 everai/volume/volume_manager.py,sha256=TZabXDog9dP8-QxsT7yBzBvsnuSEXiT7WM7aHba3qkU,14731
 everai/worker/__init__.py,sha256=J8ziddB4caVoslM3FG445bwHAjl9donqX3Bcn7yX3ts,55
@@ -386,13 +388,13 @@
 generated/volumes/test/test_volume_service_commit_file_body_file.py,sha256=F4jWVTlpo82x5j68w3hYpaHvaUZhCiFrmBSo1SVZOu0,1912
 generated/volumes/test/test_volume_service_commit_revision_body.py,sha256=UizO6O0rY4b9isgc_d2lKBUwTlCn0kiefccAD86nCcs,2548
 generated/volumes/test/test_volume_service_complete_multipart_upload_body.py,sha256=Ek6ZP78kDn1ol-guEmhm2zA42c_6XkArQf8G-_L5MgI,2233
 generated/volumes/test/test_volume_service_create_body.py,sha256=2MA4PEVNwPpMGuvpwMu4qeYvDAjrZjyUaeuo9p3qJ1c,1624
 generated/volumes/test/test_volume_service_initialize_multipart_upload_body.py,sha256=G58739S9489bMEXfaefcWch_GqgV-PTw4QCewOzxhSs,2149
 generated/volumes/test/test_volume_service_sign_multipart_upload_body.py,sha256=3b5ULrWgH38nEWU0s_MISEyj4j6LV8doFAx3CfQ6XjY,1769
 generated/volumes/test/test_volume_service_sign_upload_body.py,sha256=xX2B1LCvIu0OHX0AkyL8dXPClBTDgmZwmgPJOjjz96g,1968
-everai-0.1.31.dist-info/LICENSE,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-everai-0.1.31.dist-info/METADATA,sha256=MV8rGWcKbrcFf06ZWEOVn-ih5rFpuPLZm5oU1_cDvBM,1941
-everai-0.1.31.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-everai-0.1.31.dist-info/entry_points.txt,sha256=JB8rwg4N4ctezo4f9O0QbWJkivM_s-wUhOn0mPM9xug,98
-everai-0.1.31.dist-info/top_level.txt,sha256=UNE90t4nA-FVpeYLiqPcJVSFyaKbZ-ERHUNI0Qd6co8,17
-everai-0.1.31.dist-info/RECORD,,
+everai-0.1.32.dist-info/LICENSE,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
+everai-0.1.32.dist-info/METADATA,sha256=wCoWM8ONdhUx2v9DAtLHyOLIvVafzmiEjqFIIi06Glw,1967
+everai-0.1.32.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+everai-0.1.32.dist-info/entry_points.txt,sha256=JB8rwg4N4ctezo4f9O0QbWJkivM_s-wUhOn0mPM9xug,98
+everai-0.1.32.dist-info/top_level.txt,sha256=UNE90t4nA-FVpeYLiqPcJVSFyaKbZ-ERHUNI0Qd6co8,17
+everai-0.1.32.dist-info/RECORD,,
```

