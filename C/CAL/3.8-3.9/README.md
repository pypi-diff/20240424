# Comparing `tmp/CAL-3.8-py2.py3-none-any.whl.zip` & `tmp/CAL-3.9-py2.py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,43 +1,43 @@
-Zip file size: 95653 bytes, number of entries: 41
--rw-rw-r--  2.0 unx     3653 b- defN 22-Jul-02 15:02 _CAL/Anniversary.py
+Zip file size: 97089 bytes, number of entries: 41
+-rw-rw-r--  2.0 unx     3746 b- defN 24-Feb-29 13:00 _CAL/Anniversary.py
 -rw-rw-r--  2.0 unx     3164 b- defN 22-Jul-02 15:02 _CAL/Appointment.py
 -rw-rw-r--  2.0 unx     4281 b- defN 22-Jul-02 15:02 _CAL/Calendar.py
--rw-rw-r--  2.0 unx    23965 b- defN 22-Oct-21 11:34 _CAL/Date.py
--rw-rw-r--  2.0 unx    15043 b- defN 22-Dec-07 17:10 _CAL/Date_Time.py
+-rw-rw-r--  2.0 unx    24304 b- defN 24-Mar-24 11:35 _CAL/Date.py
+-rw-rw-r--  2.0 unx    17186 b- defN 24-Apr-01 18:27 _CAL/Date_Time.py
 -rw-rw-r--  2.0 unx    11543 b- defN 22-Jul-02 15:02 _CAL/Day_Rule.py
--rw-rw-r--  2.0 unx    29155 b- defN 22-Dec-08 17:25 _CAL/Delta.py
+-rw-rw-r--  2.0 unx    32397 b- defN 24-Apr-01 19:06 _CAL/Delta.py
 -rw-rw-r--  2.0 unx     1119 b- defN 22-Jul-02 15:02 _CAL/Formatter_Scope.py
 -rw-rw-r--  2.0 unx    10629 b- defN 22-Jul-02 15:02 _CAL/G8R.py
--rw-rw-r--  2.0 unx    14134 b- defN 22-Oct-22 16:57 _CAL/Holiday.py
+-rw-rw-r--  2.0 unx    14527 b- defN 24-Feb-29 13:00 _CAL/Holiday.py
 -rw-rw-r--  2.0 unx     1371 b- defN 22-Jul-02 15:02 _CAL/JD.py
 -rw-rw-r--  2.0 unx     1488 b- defN 16-Oct-12 17:21 _CAL/LICENSE
 -rw-rw-r--  2.0 unx     5601 b- defN 22-Jul-02 15:02 _CAL/Ordinal.py
 -rw-rw-r--  2.0 unx    24060 b- defN 22-Oct-23 18:45 _CAL/Period.py
 -rw-rw-r--  2.0 unx     8684 b- defN 22-Jul-02 15:02 _CAL/Plan.py
 -rw-rw-r--  2.0 unx      445 b- defN 22-Jul-02 15:50 _CAL/README.rst
 -rw-rw-r--  2.0 unx    87339 b- defN 22-Jul-02 15:02 _CAL/Range_DT.py
 -rw-rw-r--  2.0 unx    13580 b- defN 22-Jul-02 15:02 _CAL/Relative_Delta.py
 -rw-rw-r--  2.0 unx     7070 b- defN 22-Jul-02 15:02 _CAL/Scheduled.py
 -rw-rw-r--  2.0 unx     8090 b- defN 22-Jul-02 15:02 _CAL/TaT.py
--rw-rw-r--  2.0 unx     8675 b- defN 22-Oct-12 15:27 _CAL/Time.py
--rw-rw-r--  2.0 unx       62 b- defN 23-May-29 18:58 _CAL/VERSION.py
+-rw-rw-r--  2.0 unx     8755 b- defN 24-Apr-07 17:09 _CAL/Time.py
+-rw-rw-r--  2.0 unx       62 b- defN 24-Apr-24 16:03 _CAL/VERSION.py
 -rw-rw-r--  2.0 unx    24489 b- defN 22-Jul-02 15:02 _CAL/Year.py
 -rw-rw-r--  2.0 unx     8701 b- defN 22-Jul-02 15:02 _CAL/_DTW_.py
 -rw-rw-r--  2.0 unx      888 b- defN 22-Jul-02 15:02 _CAL/__init__.py
 -rw-rw-r--  2.0 unx       22 b- defN 16-Feb-05 11:23 _CAL/babel.cfg
 -rw-rw-r--  2.0 unx     4373 b- defN 22-Oct-06 13:26 _CAL/date_time_localizer.py
 -rw-rw-r--  2.0 unx     9382 b- defN 22-Jul-02 15:02 _CAL/filter_str_dates.py
 -rw-rw-r--  2.0 unx    14529 b- defN 22-Jul-02 15:02 _CAL/pdf.py
 -rw-rw-r--  2.0 unx       26 b- defN 16-Oct-12 17:21 _CAL/setup.cfg
--rw-rw-r--  2.0 unx     2754 b- defN 23-May-29 18:38 _CAL/setup.py
+-rw-rw-r--  2.0 unx     2810 b- defN 24-Apr-24 15:45 _CAL/setup.py
 -rw-rw-r--  2.0 unx     1060 b- defN 22-Jul-02 15:02 _CAL/ui_display.py
 -rw-rw-r--  2.0 unx     8706 b- defN 20-May-20 10:29 _CAL/-I18N/de.po
 -rw-rw-r--  2.0 unx     7717 b- defN 20-May-20 10:29 _CAL/-I18N/en.po
 -rw-rw-r--  2.0 unx     7908 b- defN 20-May-20 10:29 _CAL/-I18N/pt.po
 -rw-rw-r--  2.0 unx     7632 b- defN 20-May-20 10:29 _CAL/-I18N/template.pot
--rw-rw-r--  2.0 unx     1488 b- defN 23-May-29 18:58 CAL-3.8.dist-info/LICENSE
--rw-rw-r--  2.0 unx     1237 b- defN 23-May-29 18:58 CAL-3.8.dist-info/METADATA
--rw-rw-r--  2.0 unx      110 b- defN 23-May-29 18:58 CAL-3.8.dist-info/WHEEL
--rw-rw-r--  2.0 unx        5 b- defN 23-May-29 18:58 CAL-3.8.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2976 b- defN 23-May-29 18:58 CAL-3.8.dist-info/RECORD
-41 files, 387154 bytes uncompressed, 91127 bytes compressed:  76.5%
+-rw-rw-r--  2.0 unx     1488 b- defN 24-Apr-24 16:03 CAL-3.9.dist-info/LICENSE
+-rw-rw-r--  2.0 unx     1237 b- defN 24-Apr-24 16:03 CAL-3.9.dist-info/METADATA
+-rw-rw-r--  2.0 unx      110 b- defN 24-Apr-24 16:03 CAL-3.9.dist-info/WHEEL
+-rw-rw-r--  2.0 unx        5 b- defN 24-Apr-24 16:03 CAL-3.9.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2976 b- defN 24-Apr-24 16:03 CAL-3.9.dist-info/RECORD
+41 files, 393500 bytes uncompressed, 92563 bytes compressed:  76.5%
```

## zipnote {}

```diff
@@ -102,23 +102,23 @@
 
 Filename: _CAL/-I18N/pt.po
 Comment: 
 
 Filename: _CAL/-I18N/template.pot
 Comment: 
 
-Filename: CAL-3.8.dist-info/LICENSE
+Filename: CAL-3.9.dist-info/LICENSE
 Comment: 
 
-Filename: CAL-3.8.dist-info/METADATA
+Filename: CAL-3.9.dist-info/METADATA
 Comment: 
 
-Filename: CAL-3.8.dist-info/WHEEL
+Filename: CAL-3.9.dist-info/WHEEL
 Comment: 
 
-Filename: CAL-3.8.dist-info/top_level.txt
+Filename: CAL-3.9.dist-info/top_level.txt
 Comment: 
 
-Filename: CAL-3.8.dist-info/RECORD
+Filename: CAL-3.9.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## _CAL/Anniversary.py

```diff
@@ -1,9 +1,9 @@
 # -*- coding: utf-8 -*-
-# Copyright (C) 2020-2022 Christian Tanzer All rights reserved
+# Copyright (C) 2020-2024 Christian Tanzer All rights reserved
 # tanzer@gg32.com                                      https://www.gg32.com
 # #*** <License> ************************************************************#
 # This module is part of the package CAL.
 #
 # This module is licensed under the terms of the BSD 3-Clause License
 # <https://www.gg32.com/license/bsd_3c.html>.
 # #*** </License> ***********************************************************#
@@ -14,20 +14,21 @@
 #
 # Purpose
 #    Model anniversaries
 #
 # Revision Dates
 #    21-May-2020 (CT) Creation
 #    11-Apr-2022 (CT) Fix `_Anniversary_Day_.description`
+#    27-Feb-2024 (CT) Add `Wedding.symbol`
 #    ««revision-date»»···
 #--
 
-from   _CAL                    import CAL
-from   _TFL                    import TFL
-from   _TFL.pyk                import pyk
+from   _CAL                     import CAL
+from   _TFL                     import TFL
+from   _TFL.pyk                 import pyk
 
 from   _TFL.I18N                import _, _T, _Tn
 
 import _CAL.Date
 import _CAL.Day_Rule
 import _CAL.Delta
 
@@ -110,18 +111,20 @@
 
 class Obit (Anniversary) :
     """Day when a person died."""
 
     symbol      = "\u2020" ### dagger
 
 # end class Obit
-#
+
 class Wedding (Anniversary) :
     """Day when two persons where married."""
 
+    symbol      = "\u26ad" ### marriage_symbol
+
     def __init__ (self, n1, n2, * args, ** kwds) :
         self.n1 = n1
         self.n2 = n2
         name    = "(%s & %s)" % (n1, n2)
         self.__super.__init__ (name, * args, ** kwds)
     # end def __init__
```

## _CAL/Date.py

```diff
@@ -1,9 +1,9 @@
 # -*- coding: utf-8 -*-
-# Copyright (C) 2004-2022 Christian Tanzer. All rights reserved
+# Copyright (C) 2004-2024 Christian Tanzer. All rights reserved
 # tanzer@gg32.com                                      https://www.gg32.com
 # ****************************************************************************
 #
 # This module is licensed under the terms of the BSD 3-Clause License
 # <https://www.gg32.com/license/bsd_3c.html>.
 # ****************************************************************************
 #
@@ -65,14 +65,16 @@
 #    20-Apr-2016 (CT) Factor `month_from_string`
 #    21-Apr-2016 (CT) Add check for tail to `from_string`
 #    14-May-2016 (CT) Strip leading `+` from delta arg for `_Date_Arg_`
 #    26-Sep-2016 (CT) Move `sidereal_time` to `CAL.Sky`
 #    30-Nov-2016 (CT) Use `CAL.G8R.Months.LC`, not `CAL.G8R.Months`
 #    21-Oct-2022 (CT) Add and use `date_pattern_abbr`
 #                     * support bare `year` and `year-month` in `from_string`
+#    24-Mar-2024 (CT) Change `_Date_Arg_` to allow multiple delta values
+#                     + change `_Command` arg `base_date` to `TFL.CAO.Opt.Date`
 #    ««revision-date»»···
 #--
 
 from   _CAL                     import CAL
 from   _TFL                     import TFL
 
 import _CAL._DTW_
@@ -610,27 +612,28 @@
     _delta_pat = Regexp ("^[-+]")
 
     def cook (self, value, cao = None) :
         T = self._CAL_Type
         if value == "now" :
             result = T ()
         elif value :
-            if self._delta_pat.match (value) :
-                import _CAL.Relative_Delta
-                delta  = CAL.Relative_Delta.from_string (value.lstrip ("+"))
-                now    = T ()
-                result = now + delta
+            import _CAL.Relative_Delta
+            d_pat       = self._delta_pat
+            v0, * vs    = value.split (";")
+            if d_pat.match (v0) :
+                delta   = CAL.Relative_Delta.from_string (v0.lstrip ("+"))
+                now     = T ()
+                result  = now + delta
                 if type (result) is not T :
-                    raise TypeError \
-                        ( "Wrong delta %r forces Date_Time '%s', "
-                          "need Date instead"
-                        % (value, result)
-                        )
+                    result  = T (result.year, result.month, result.day)
             else :
-                result = T.from_string (value)
+                result  = T.from_string (v0)
+            for v in vs :
+                delta   = CAL.Relative_Delta.from_string (v.strip (" "))
+                result += delta
         else :
             result = None
         return result
     # end def cook
 
 # end class _Date_Arg_
 
@@ -639,41 +642,46 @@
     ### Usage example for `-regexp` and `-xformat`::
     ### for f in *.tex; do
     ###   VCMove $f $(python /swing/python/Date.py -regexp '(?P<prefix> .*)_(?P<date> \d{2}-[A-Za-z][a-z]{2}-\d{4}|\d{8})\.?(?P<ext> .*)' -xformat '%(date)s_%(prefix)s.%(ext)s' $f)
     ### done
     if cmd.regexp :
         regexp = Regexp (cmd.regexp, re.VERBOSE)
         if regexp.search (cmd.base_date) :
-            base_date  = regexp.date
+            base_date  = Date.from_string (regexp.date)
             match_dict = regexp.groupdict ()
         else :
             import sys
             print \
                 ( "`%s` doesn't match for `%s`"
                 % (cmd.regexp, cmd.base_date)
                 , file = sys.stderr
                 )
             sys.exit (9)
     else :
         base_date   = cmd.base_date
         match_dict = {}
-    base_date = Date.from_string (base_date)
     if cmd.offset :
         base_date += cmd.offset
     if cmd.delta_to :
         print ((base_date - cmd.delta_to).days)
     else :
         date = base_date.formatted (cmd.format)
         print (cmd.xformat % Scope (globs = match_dict, locls = vars ()))
 # end def _main
 
 _Command = TFL.CAO.Cmd \
     ( handler     = _main
     , args        =
-        ( "base_date:S=%s" % Date (),)
+        ( TFL.CAO.Opt.Date
+            ( name          = "base_date"
+            , default       = "now"
+            , description   = "Base date_time to operate on"
+            )
+        ,
+        )
     , opts        =
         ( TFL.CAO.Opt.Date
             ( name        = "delta_to"
             , description = "Print `base_date - delta_to`"
             )
         , "-format:S=%Y%m%d?Format for date (not used for -delta_to)"
         , "-offset:I=0?delta to `base_date` in days"
```

## _CAL/Date_Time.py

```diff
@@ -1,9 +1,9 @@
 # -*- coding: utf-8 -*-
-# Copyright (C) 2004-2022 Christian Tanzer. All rights reserved
+# Copyright (C) 2004-2024 Christian Tanzer. All rights reserved
 # tanzer@gg32.com                                      https://www.gg32.com
 # ****************************************************************************
 #
 # This module is licensed under the terms of the BSD 3-Clause License
 # <https://www.gg32.com/license/bsd_3c.html>.
 # ****************************************************************************
 #
@@ -44,24 +44,32 @@
 #     6-Oct-2022 (CT) Use `timezone_context` to fix tz-specific doctests
 #     9-Oct-2022 (CT) Simplify `as_local` (support only Python 3.9+)
 #    10-Oct-2022 (CT) Add property `yyyy_mm_dd_HH_MM`
 #    12-Oct-2022 (CT) Add doctest for `formatted`
 #     4-Dec-2022 (CT) Add `JT` (time of day as decimal fraction)
 #     4-Dec-2022 (CT) Add `dst_adjustment`
 #                     + Add optional argument `tz` to `as_local`
+#    18-Oct-2023 (CT) Add `datetime_utcnow`
+#                     * drop-in replacement for `datetime.utcnow`
+#                     * `datetime.utcnow` deprecated as of Python 3.12
+#    29-Feb-2024 (CT) Add `_Command`
+#                     + Define `_CAL_Type` as lass/instance property to
+#                       return `CAL.Date_Time` (avoid `__main__.Date_Time`)
+#    29-Feb-2024 (CT) Add option `-relative_delta`
 #    ««revision-date»»···
 #--
 
 from   _TFL                     import TFL
 from   _CAL                     import CAL
 
 import _CAL.Date
 import _CAL.Time
 
-from   _TFL._Meta.Once_Property import Once_Property
+from   _TFL._Meta.Once_Property import \
+    Once_Property, Class_and_Instance_Once_Property
 import _TFL.CAO
 from   _TFL.pyk                 import pyk
 from   _TFL.Regexp              import *
 
 import datetime
 
 class Date_Time (CAL.Date, CAL.Time) :
@@ -434,14 +442,71 @@
 # end class Date_Time_M
 
 class _Date_Time_Arg_ (TFL.CAO.Opt.Date) :
     """Argument or option with a (calendary) date/time value"""
 
     _real_name = "Date_Time"
 
-    _CAL_Type  = Date_Time
+    @Class_and_Instance_Once_Property
+    def _CAL_Type (soc) :
+        """Import `Date_Time` from `CAL.Date_Time`
+
+        Otherwise, `__main__.Date_Time` vs. `CAL.Date_Time` confusion is
+        possible.
+        """
+        from _CAL.Date_Time import Date_Time
+        return Date_Time
+    # end def _CAL_Type
 
 # end class _Date_Time_Arg_
 
+def datetime_utcnow () :
+    """Return the current UTC date and time, with tzinfo None.
+
+    Drop-in replacement for the `datetime.utcnow` function deprecated by
+    Python 3.12.
+    """
+    return Date_Time ().as_utc ()._body.replace (tzinfo=None)
+# end def datetime_utcnow
+
+def _main (cmd) :
+    base = cmd.base
+    if cmd.offset :
+        base  += cmd.offset
+    if cmd.relative_delta :
+        ### need to do this by hand here to avoid module-level circular import
+        import _CAL.Relative_Delta
+        delta  = CAL.Relative_Delta.from_string (cmd.relative_delta)
+        base  += delta
+    if cmd.delta_to :
+        print (base - cmd.delta_to)
+    else :
+        print (base.formatted (cmd.format))
+# end def _main
+
+_Command = TFL.CAO.Cmd \
+    ( handler     = _main
+    , args        =
+        ( TFL.CAO.Opt.Date_Time
+            ( name          = "base"
+            , default       = "now"
+            , description   = "Base date_time to operate on"
+            )
+        ,
+        )
+    , opts        =
+        ( TFL.CAO.Opt.Date_Time
+            ( name          = "delta_to"
+            , description   = "Print `base - delta_to`"
+            )
+        , "-format:S=%Y%m%d?Format for date-time (not used for -delta_to)"
+        , "-offset:I=0?delta to `base` in days"
+        , "-relative_delta:S?Relative delta to `base`"
+        )
+    , max_args    = 1
+    )
+
 if __name__ != "__main__" :
     CAL._Export ("*")
+else :
+    _Command ()
 ### __END__ CAL.Date_Time
```

## _CAL/Delta.py

```diff
@@ -1,9 +1,9 @@
 # -*- coding: utf-8 -*-
-# Copyright (C) 2004-2022 Christian Tanzer. All rights reserved
+# Copyright (C) 2004-2024 Christian Tanzer. All rights reserved
 # tanzer@gg32.com                                      https://www.gg32.com
 # ****************************************************************************
 #
 # This module is licensed under the terms of the BSD 3-Clause License
 # <https://www.gg32.com/license/bsd_3c.html>.
 # ****************************************************************************
 #
@@ -52,14 +52,17 @@
 #    12-Oct-2022 (CT) Add `Time_Delta.hh_mm_ss` and `.formatted`
 #    12-Oct-2022 (CT) Move `Time_Delta.formatted` to `_DT_Delta_`
 #                     + and generalize so that it works for
 #                       `Date_Delta` and `Date_Time_Delta`, too
 #    13-Oct-2022 (CT) Add optional argument `day_digits` to `formatted`
 #    13-Oct-2022 (CT) Change output format for `"%H"` to `"%2dh"`
 #     8-Dec-2022 (CT) Add `total_seconds` to `_DT_Delta_`
+#     1-Apr-2024 (CT) Add missing operator functions, doctests
+#                     + Factor `delta_number_op`
+#                     + Add `__rfloordiv__`, `__rmul__`.`__rtruediv__`
 #    ««revision-date»»···
 #--
 
 from   _CAL                       import CAL
 from   _TFL                       import TFL
 
 import _CAL._DTW_
@@ -148,18 +151,34 @@
 class _Delta_ (_Delta_Mixin_, CAL._DTW_) :
     """Root class for delta classes"""
 
     def __radd__ (self, rhs) :
         return self + rhs
     # end def __radd__
 
+    def __rfloordiv__ (self, rhs) :
+        return rhs // self._body
+    # end def __rfloordiv__
+
+    def __rmod__ (self, rhs) :
+        return rhs % self._body
+    # end def __rmod__
+
+    def __rmul__ (self, rhs) :
+        return self * rhs
+    # end def __rmul__
+
     def __rsub__ (self, rhs) :
-        return self - rhs
+        return rhs + -self
     # end def __rsub__
 
+    def __rtruediv__ (self, rhs) :
+        return rhs / self._body
+    # end def __rtruediv__
+
 # end class _Delta_
 
 class _DT_Delta_ (_Delta_) :
     """Root class for datetime.timedelta wrapping classes"""
 
     _Type              = datetime.timedelta
     _kind              = "delta"
@@ -176,14 +195,21 @@
 
     def delta_op (self, rhs, op) :
         """Return result of `op` applied to `self` and delta `rhs`"""
         result = op (self._body, rhs._body)
         return self.__class__ (** {self._kind : result})
     # end def delta_op
 
+    def delta_number_op (self, rhs, op) :
+        """Return result of div/mul `op` applied to `self` and `rhs`"""
+        result = op (self._body, rhs)
+        return result if isinstance (result, (int, float)) \
+            else self.__class__ (** {self._kind : result})
+    # end def delta_number_op
+
     def dt_op (self, dot, op) :
         """Return result of `op` applied to date/time value `dot` and delta
            `self`
         """
         if isinstance (dot, CAL._DTW_) :
             result = op (dot._body, self._body)
             return dot.__class__ (** {dot._kind : result})
@@ -227,50 +253,75 @@
         if isinstance (rhs, _Delta_) :
             op = self.delta_op
         else :
             op = self.dt_op
         return op (rhs, operator.add)
     # end def __add__
 
+    def __divmod__ (self, rhs) :
+        return self // rhs, self % rhs
+    # end def __divmod__
+
     def __floordiv__ (self, rhs) :
-        result = self._body / rhs
-        return self.__class__ (** {self._kind : result})
+        if isinstance (rhs, _Delta_) :
+            return self._body // rhs._body
+        else :
+            return self.delta_number_op (rhs, operator.floordiv)
     # end def __floordiv__
 
+    def __mod__ (self, rhs) :
+        if isinstance (rhs, _Delta_) :
+            return self.delta_op (rhs, operator.mod)
+        else :
+            return self.delta_number_op (rhs, operator.mod)
+    # end def __mod__
+
     def __mul__ (self, rhs) :
-        result = self._body * rhs
-        return self.__class__ (** {self._kind : result})
+        return self.delta_number_op (rhs, operator.mul)
     # end def __mul__
 
     def __neg__ (self) :
         return self.__class__ (** {self._kind : - self._body})
     # end def __neg__
 
+    def __pos__ (self) :
+        return self
+    # end def __pos__
+
     def __sub__ (self, rhs) :
         if isinstance (rhs, _Delta_) :
             op = self.delta_op
         else :
-            op = self.dt_op
+            op = self.delta_number_op
         return op (rhs, operator.sub)
     # end def __sub__
 
+    def __truediv__ (self, rhs) :
+        if isinstance (rhs, _Delta_) :
+            return self._body / rhs._body
+        elif isinstance (rhs, datetime.timedelta) :
+            return self._body / rhs
+        else :
+            return self.delta_number_op  (rhs, operator.truediv)
+    # end def __truediv__
+
 # end class _DT_Delta_
 
 class Time_Delta (_DT_Delta_) :
     """Model a time delta
 
     >>> t = Time_Delta (3)
     >>> print (t)
     3:00:00
     >>> print (t.formatted ())
-    3:00:00
+     3:00:00
     >>> print (t.formatted ("%H:%M"))
-    3:00
+     3:00
     >>> print (t.formatted ("%H"))
-    3h
+     3h
 
     >>> t.h, t.m, t.s, t.seconds
     (3, 0, 0, 10800)
     >>> t.total_seconds
     10800.0
     >>> abs (t) is t
     True
@@ -281,27 +332,27 @@
     False
     >>> abs (t) == - t
     True
     >>> hms = Time_Delta (2, 15, 42)
     >>> print (hms)
     2:15:42
     >>> print (hms.formatted ())
-    2:15:42
+     2:15:42
     >>> print (hms.formatted ("%H:%M"))
-    2:16
+     2:16
     >>> hms.h, hms.m, hms.s, hms.seconds
     (2, 15, 42, 8142)
 
     >>> hmsm = Time_Delta (2, 15, 30, 501)
     >>> print (hmsm)
     2:15:30.501000
     >>> print (hmsm.formatted ())
-    2:15:31
+     2:15:31
     >>> print (hmsm.formatted ("%H:%M"))
-    2:16
+     2:16
 
     >>> md = Time_Delta (minutes = 42)
     >>> print (md)
     0:42:00
 
     >>> Time_Delta.from_string("7")
     Time_Delta (7, 0, 0, 0, 0)
@@ -583,14 +634,75 @@
     >>> print (dtd.formatted ())
     14d+18:21:36
     >>> print (dtd.formatted ("%H:%M"))
     14d+18:22
     >>> print (dtd.formatted ("%H"))
     14d+18h
 
+    >>> d1 = Date_Time_Delta (1, 12)
+    >>> d2 = Date_Time_Delta (0,  6)
+    >>> d1
+    Date_Time_Delta (1, 12, 0, 0, 0, 0, 0)
+    >>> d1 * 2.0
+    Date_Time_Delta (3, 0, 0, 0, 0, 0, 0)
+    >>> 2 * d1
+    Date_Time_Delta (3, 0, 0, 0, 0, 0, 0)
+    >>> d1 / 2
+    Date_Time_Delta (0, 18, 0, 0, 0, 0, 0)
+    >>> d2
+    Date_Time_Delta (0, 6, 0, 0, 0, 0, 0)
+    >>> d2 / 1.5
+    Date_Time_Delta (0, 4, 0, 0, 0, 0, 0)
+    >>> d2 / 4
+    Date_Time_Delta (0, 1, 30, 0, 0, 0, 0)
+    >>> d2 // 4
+    Date_Time_Delta (0, 1, 30, 0, 0, 0, 0)
+    >>> d1 + d2
+    Date_Time_Delta (1, 18, 0, 0, 0, 0, 0)
+    >>> d1 - d2
+    Date_Time_Delta (1, 6, 0, 0, 0, 0, 0)
+    >>> d2 - d1
+    Date_Time_Delta (-2, 18, 0, 0, 0, 0, -1)
+    >>> d1 / d2
+    6.0
+    >>> d1 // d2
+    6
+    >>> d2 % d1
+    Date_Time_Delta (0, 6, 0, 0, 0, 0, 0)
+    >>> d1 % d2
+    Date_Time_Delta (0, 0, 0, 0, 0, 0, 0)
+
+    >>> d1 + d2._body
+    datetime.timedelta(days=1, seconds=64800)
+    >>> d1._body + d2
+    datetime.timedelta(days=1, seconds=64800)
+    >>> d1 - d2._body
+    Date_Time_Delta (1, 6, 0, 0, 0, 0, 0)
+    >>> d1._body - d2
+    datetime.timedelta(days=1, seconds=21600)
+    >>> d2 % d1._body
+    Date_Time_Delta (0, 6, 0, 0, 0, 0, 0)
+    >>> d2._body % d1
+    datetime.timedelta(seconds=21600)
+    >>> d1 / d2._body
+    6.0
+    >>> d1._body / d2
+    6.0
+    >>> divmod (d2, d1)
+    (0, Date_Time_Delta (0, 6, 0, 0, 0, 0, 0))
+    >>> divmod (d1, d2)
+    (6, Date_Time_Delta (0, 0, 0, 0, 0, 0, 0))
+
+    >>> - d1
+    Date_Time_Delta (-2, 12, 0, 0, 0, 0, -1)
+    >>> + d1
+    Date_Time_Delta (1, 12, 0, 0, 0, 0, 0)
+    >>> abs (- d1)
+    Date_Time_Delta (1, 12, 0, 0, 0, 0, 0)
+
     """
 
     _init_arg_names = ("days", ) + Time_Delta._init_arg_names + ("weeks", )
     _kind           = "date_time_delta"
 
     delta_op        = _DT_Delta_.delta_op
```

## _CAL/Holiday.py

```diff
@@ -1,9 +1,9 @@
 # -*- coding: utf-8 -*-
-# Copyright (C) 2003-2022 Christian Tanzer. All rights reserved
+# Copyright (C) 2003-2024 Christian Tanzer. All rights reserved
 # tanzer@gg32.com                                      https://www.gg32.com
 # ****************************************************************************
 #
 # This module is licensed under the terms of the BSD 3-Clause License
 # <https://www.gg32.com/license/bsd_3c.html>.
 # ****************************************************************************
 #
@@ -39,14 +39,19 @@
 #    10-May-2020 (CT) Adapt to change of `CAL.Day_Rule`
 #    14-May-2020 (CT) Add `Config` option
 #    18-May-2020 (CT) Add `show_by_event`, factor `show_by_year`
 #    29-May-2020 (CT) Use `"\v"`, not blank line as separator between events
 #    22-Oct-2022 (CT) Call `CAL._Export` unconditionally
 #                     * `_main_year` accesses `CAL.holidays` to allow config
 #                       files to modify/override the standard holidays
+#    27-Feb-2024 (CT) Add `import _CAL.Holiday` to `__main__`
+#                     * Remove unconditional `CAL._Export`
+#                     * The unconditional `CAL._Export` triggered an exception
+#                       due to the export conflicts between `__main__` and
+#                       `_CAL` (same name for different objects)
 #    ««revision-date»»···
 #--
 
 from   _CAL                    import CAL
 from   _TFL                    import TFL
 from   _TFL.pyk                import pyk
 
@@ -374,15 +379,16 @@
             )
         ,
         )
     , do_keywords   = True
     , min_args      = 1
     )
 
-### `_main_year` needs access to features of this module via `CAL` to allow
-### overriding of `holidays` by config files
-### --> export unconditionally
-CAL._Export ("*")
-
 if __name__ == "__main__" :
+    ### `_main_year` needs to access to features of this module via `CAL`
+    ### to allow overriding of `holidays` by config files
+    ### --> im, port _CAL.Holiday here
+    import _CAL.Holiday
     _Command ()
+else :
+    CAL._Export ("*")
 ### __END__ CAL.Holiday
```

## _CAL/Time.py

```diff
@@ -1,9 +1,9 @@
 # -*- coding: utf-8 -*-
-# Copyright (C) 2004-2022 Christian Tanzer. All rights reserved
+# Copyright (C) 2004-2024 Christian Tanzer. All rights reserved
 # tanzer@gg32.com                                      https://www.gg32.com
 # ****************************************************************************
 #
 # This module is licensed under the terms of the BSD 3-Clause License
 # <https://www.gg32.com/license/bsd_3c.html>.
 # ****************************************************************************
 #
@@ -32,14 +32,15 @@
 #    20-Jul-2016 (CT) Change `Time.pattern` to bare `hour` without any `minute`
 #    26-Sep-2016 (CT) Correct `microsecond` in `from_decimal_hours`, `seconds`
 #    25-Sep-2018 (CT) Dry `as_degrees`: use `.seconds`, not home-grown code
 #    12-Oct-2022 (CT) Add `Time.hh_mm_ss` and `.formatted`
 #    12-Oct-2022 (CT) Remove default `format` from `formatted`
 #                     - The default broke Date_Time calls to `formatted`
 #                       without argument
+#     7-Apr-2024 (CT) Clamp `microsecond` in `from_decimal_hours`
 #    ««revision-date»»···
 #--
 
 from   _CAL                     import CAL
 from   _TFL                     import TFL
 
 import _CAL._DTW_
@@ -153,15 +154,15 @@
     # end def as_delta
 
     @classmethod
     def from_decimal_hours (cls, h) :
         m = (h - int (h)) * 60
         s = (m - int (m)) * 60
         u = (s - int (s)) * 1000000
-        return (cls (int (h), int (m), int (s), int (u + 0.5)))
+        return (cls (int (h), int (m), int (s), min (int (u + 0.5), 999999)))
     # end def from_decimal_hours
 
     @classmethod
     def from_degrees (cls, degrees) :
         """Returns `degrees` converted to time instance.
 
            >>> Time.from_degrees (0)
```

## _CAL/VERSION.py

```diff
@@ -1,2 +1,2 @@
-__date__    = "2023-05-29T19:42:12+01:00"
-__version__ = "3.8"
+__date__    = "2024-04-24T16:45:19+01:00"
+__version__ = "3.9"
```

## _CAL/setup.py

```diff
@@ -1,10 +1,10 @@
 #!/usr/bin/env python
 # -*- coding: utf-8 -*-
-# Copyright (C) 2016-2023 Christian Tanzer. All rights reserved
+# Copyright (C) 2016-2024 Christian Tanzer. All rights reserved
 # tanzer@gg32.com                                      https://www.gg32.com
 # Web: https://www.gg32.com/en/ Email: tanzer@swing.co.at
 # All rights reserved
 # ****************************************************************************
 # This module is licensed under the terms of the BSD 3-Clause License
 # <https://www.gg32.com/license/bsd_3c.html>.
 # ****************************************************************************
@@ -19,14 +19,15 @@
 # Revision Dates
 #    11-Oct-2016 (CT) Creation
 #    13-Oct-2016 (CT) Use `find_packages`, `_TFL.fs_find`, not home-grown code
 #    22-Feb-2017 (CT) Use `TFL_STP`, not home-grown code
 #    27-Feb-2017 (CT) Add Python 3.6 to `classifiers`
 #    25-Mar-2020 (CT) Restrict Python versions to >=3.7
 #    29-May-2023 (CT) Restrict Python versions to >=3.8
+#    24-Apr-2024 (CT) Restrict Python versions to >=3.9
 #    ««revision-date»»···
 #--
 
 from   setuptools               import setup
 
 import TFL_STP as STP
 
@@ -60,15 +61,15 @@
         [ "Development Status :: 5 - Production/Stable"
         , "License :: OSI Approved :: " + license
         , "Operating System :: OS Independent"
         , "Programming Language :: Python"
         , "Intended Audience :: Developers"
         , "Topic :: Software Development :: Libraries :: Python Modules"
         ]
-    , python_requires      = ">=3.8"
+    , python_requires      = ">=3.9"
     , setup_requires       = ["TFL_STP>=3"]
     , install_requires     = ["TFL>=3", "python-dateutil"]
     , extras_require       = dict
         ( icalendar            = ["icalendar"]
         , pdf                  = ["reportlab"]
         )
     , cmdclass             = dict (test = Test_Command)
```

## Comparing `CAL-3.8.dist-info/LICENSE` & `CAL-3.9.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `CAL-3.8.dist-info/METADATA` & `CAL-3.9.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,23 +1,23 @@
 Metadata-Version: 2.1
 Name: CAL
-Version: 3.8
+Version: 3.9
 Summary: Package dealing with date, time, and calendars.
 Home-page: https://codeberg.org/tanzer/tapyr
 Author: Christian Tanzer
 Author-email: tanzer@swing.co.at
 License: BSD License
 Platform: Any
 Classifier: Development Status :: 5 - Production/Stable
 Classifier: License :: OSI Approved :: BSD License
 Classifier: Operating System :: OS Independent
 Classifier: Programming Language :: Python
 Classifier: Intended Audience :: Developers
 Classifier: Topic :: Software Development :: Libraries :: Python Modules
-Requires-Python: >=3.8
+Requires-Python: >=3.9
 License-File: LICENSE
 Requires-Dist: TFL (>=3)
 Requires-Dist: python-dateutil
 Provides-Extra: icalendar
 Requires-Dist: icalendar ; extra == 'icalendar'
 Provides-Extra: pdf
 Requires-Dist: reportlab ; extra == 'pdf'
```

## Comparing `CAL-3.8.dist-info/RECORD` & `CAL-3.9.dist-info/RECORD`

 * *Files 15% similar despite different names*

```diff
@@ -1,41 +1,41 @@
-_CAL/Anniversary.py,sha256=1OLh4n55I5VL5zTP4cbnjRrPH3KRIf9dxmZt13e-rWA,3653
+_CAL/Anniversary.py,sha256=NLDN1prPG68uWVuR-BOQZxln8cI2AOvtY8qnBU5LZdY,3746
 _CAL/Appointment.py,sha256=phr7HvBJI7K7q8RguVrooZ-GPtUI96Mf5isoFeLyPn4,3164
 _CAL/Calendar.py,sha256=metKVKQ2IDU0AogPTWBUlLCqbyWax8ozCqJe_areF4s,4281
-_CAL/Date.py,sha256=BDMMZ_qNOLNF1PwNpCpL_ekooMk3Hr1sNaaV06MpI4k,23965
-_CAL/Date_Time.py,sha256=OYFBJEJ1dRoQ5-SvI3kkL23z3gJIaztarJn7z6OOfQ4,15043
+_CAL/Date.py,sha256=X4lqV-8txQ4Ogm93R3IwZGnJe31dgzf7zzAZhAbV9Wg,24304
+_CAL/Date_Time.py,sha256=HCD6kal4hLiyUnRvUGEpzg88NZN3aGCqdQGbfZKFgwE,17186
 _CAL/Day_Rule.py,sha256=TAY9JsiUMmVE-AQY8whFe9C0jaJeY7k6v3Ol_7Fa5cc,11543
-_CAL/Delta.py,sha256=H1daWtCf8erLYc3OOw96A-p8B72VQfnoQoyfc-kuy8g,29155
+_CAL/Delta.py,sha256=qUonRS0WlRP40jjI2w0_ENuaW37yNEcKnV3evDBVkmk,32397
 _CAL/Formatter_Scope.py,sha256=fSUQXC5bdPw5OCT8JIVvo0qmUVywPM-ym_SGEBN2HxQ,1119
 _CAL/G8R.py,sha256=VVNmW1xo_vTx0MvMXztxYM7kkg3b7inbClHlD-5MnkU,10629
-_CAL/Holiday.py,sha256=vpTMys7Njek_9snln2JRX8rFO3iJpHn2fNA2iJ1EqtQ,14134
+_CAL/Holiday.py,sha256=Wesz0fIgKaQYabht7zQVbrfu_4CcXq2AQY4muEOn5H4,14527
 _CAL/JD.py,sha256=dMSeu-jMdfSpsi6xOOCvaBJlUaAW4T_vkp_P21bWzE4,1371
 _CAL/LICENSE,sha256=vNT2X-Co_3EnWxE_k0jdK4noRvjPmPKhBQGx6qdL56A,1488
 _CAL/Ordinal.py,sha256=J4Av3uGqQMRYkjFOHxV6ZZB8zq0IbQ9MC6CJ4BUjUgQ,5601
 _CAL/Period.py,sha256=AoNqB5ekKwpoiRCbh262uEOS8WrSuuOr0h2bAxLLQ-Y,24060
 _CAL/Plan.py,sha256=hMxlggtmkkHtcQqPwaVLvErCU44qhuDAaAlOIejAV-s,8684
 _CAL/README.rst,sha256=uEBuXWvYI5_Iou_gTYuqGMm1jg3Mj0pZD7NPfHhsb1U,445
 _CAL/Range_DT.py,sha256=QrArb-QDPAY5o5puBO_y_PqwV4c7TqDPFqGJXeU5mjI,87339
 _CAL/Relative_Delta.py,sha256=9K5Hcnv-oKXTylQdyVx8KtU9OnObSschWskUM5x8lQI,13580
 _CAL/Scheduled.py,sha256=NVvAXul3MbdXMpXEjp79smmikJ9wK11h-5YFzVqPtzI,7070
 _CAL/TaT.py,sha256=z0QH7mfbVth1lGOdS6XSBsCntK6k5CrO5mVCReAfm6k,8090
-_CAL/Time.py,sha256=k-3RvLcF7nSsLeGInB5P087JKLfmF0BK5rWQ0pg546A,8675
-_CAL/VERSION.py,sha256=KiYr46rtJXBi6xbe4hRpXF4qiVDkNPUewuVClvYGaG4,62
+_CAL/Time.py,sha256=u6r97a7cBRXOh1wolXjugG_5U-Bbb020xOrRw1Hd-2M,8755
+_CAL/VERSION.py,sha256=9SWzE5vIomnAHNs_S2yzGRGS2uyp9lEAUIIWLKHojdY,62
 _CAL/Year.py,sha256=EjHfvVG0tJs9m1_4omIHHCHYErkhJrcO7BwpuYrCEoo,24489
 _CAL/_DTW_.py,sha256=sNzT4_Pz39pCnqxiALz-QMP0OUWbvoOL0cplTSkN_cI,8701
 _CAL/__init__.py,sha256=QxO3ty1pGEHDMhcdnb890HE_wKcxNcD1s3nKlxfUy04,888
 _CAL/babel.cfg,sha256=erS9tstsRoqErz9ZovM1unBlKentCIdiaEEK6kMsCZE,22
 _CAL/date_time_localizer.py,sha256=n3ojCsTMjrPV3T5gVtNdWgx7bUalih-cRzUYEW_XBAE,4373
 _CAL/filter_str_dates.py,sha256=kovootoLeCVsjKznUybs4RUYCMVbuGODkZmEyfCROpE,9382
 _CAL/pdf.py,sha256=WBPc3zo9LCgZ7QNJB-bhmxbm1Ky2qmY_4a2gXCDqA3U,14529
 _CAL/setup.cfg,sha256=eKhAFM3IPYhPYp110DyceMV7UVnztKmHZXP_Mz1CuaM,26
-_CAL/setup.py,sha256=JjHDWPuEm_vLbfW9HcdSo5oWNnFLluoIkohSi2BeWI4,2754
+_CAL/setup.py,sha256=iJBhreJgN-sIWlJgEGEud-MchRrI179qmZoMhs9WttA,2810
 _CAL/ui_display.py,sha256=WFH7XTrWscznzgWmv7cGIudqX3L1eaCIcO1OgZq9uwI,1060
 _CAL/-I18N/de.po,sha256=XLg3ywrAL9sq389utdXsetV-HOqJh19C0N8P_AxF6PQ,8706
 _CAL/-I18N/en.po,sha256=7Jn1aYCBVxjn933gFa3QAkDfXao_9tnvgJeLXmT1Res,7717
 _CAL/-I18N/pt.po,sha256=z3tQIo7QTapNkfXsuZ-e4_RS68mZIgb76ybG45Q7ldE,7908
 _CAL/-I18N/template.pot,sha256=jg2GWQjld2DZ7ID_YJguJcL2rYdNd7R-2J-hTpekU_A,7632
-CAL-3.8.dist-info/LICENSE,sha256=vNT2X-Co_3EnWxE_k0jdK4noRvjPmPKhBQGx6qdL56A,1488
-CAL-3.8.dist-info/METADATA,sha256=8iI7zwYI5prU6yYyQvPqSeWD1e4PnZgdQMWUHAaR70Q,1237
-CAL-3.8.dist-info/WHEEL,sha256=a-zpFRIJzOq5QfuhBzbhiA1eHTzNCJn8OdRvhdNX0Rk,110
-CAL-3.8.dist-info/top_level.txt,sha256=vl3NNe8_fHpRf7DQgsoOSLc1uCejNBiRA5KI7OqrGsM,5
-CAL-3.8.dist-info/RECORD,,
+CAL-3.9.dist-info/LICENSE,sha256=vNT2X-Co_3EnWxE_k0jdK4noRvjPmPKhBQGx6qdL56A,1488
+CAL-3.9.dist-info/METADATA,sha256=6ZI9Sy-M8Xx59-0tQrBv_KNvVtMU3MHZadqjErmH-Kw,1237
+CAL-3.9.dist-info/WHEEL,sha256=a-zpFRIJzOq5QfuhBzbhiA1eHTzNCJn8OdRvhdNX0Rk,110
+CAL-3.9.dist-info/top_level.txt,sha256=vl3NNe8_fHpRf7DQgsoOSLc1uCejNBiRA5KI7OqrGsM,5
+CAL-3.9.dist-info/RECORD,,
```

